<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Notebook</title><link>https://dpurge.github.io/</link><description>Recent content on Notebook</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://dpurge.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title/><link>https://dpurge.github.io/docs/devops/ansible/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/ansible/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>
&lt;p>Install Ansible:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo apt-add-repository ppa:ansible/ansible
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install ansible
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/argo/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/argo/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>
&lt;p>Install ArgoCD:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl create namespace argocd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>helm repo add argo https://argoproj.github.io/argo-helm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Forward port:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl get all -n argocd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl port-forward service/argocd-server -n argocd 8080:443
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Extract credential:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;{.data.password}&amp;#34;&lt;/span> | base64 -d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Login from CLI:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl port-forward svc/argocd-server -n argocd 8080:443
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>argocd login 127.0.0.1:8080
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install application:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>argocd app create nginx-prod &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --repo https://github.com/dpurge/argo-config.git &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --path nginx/overlays/prod &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --dest-server https://kubernetes.default.svc &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --dest-namespace prod
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Cheatsheet:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/aws/architecture/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/aws/architecture/</guid><description>&lt;h1 id="learn-architecture">
 Learn architecture
 &lt;a class="anchor" href="#learn-architecture">#&lt;/a>
&lt;/h1>
&lt;!--
See:
 - [Gherkin](https://cucumber.io/docs/gherkin/reference/)
 - [Markdown with Gherkin](https://github.com/cucumber/gherkin/blob/main/MARKDOWN_WITH_GHERKIN.md)

VSCode tip: `Ctr-K V` for preview
-->
&lt;p>Exercises in simple application architecture design.&lt;/p>
&lt;p>Tutorial: 
 &lt;a href="https://aws.amazon.com/prescriptive-guidance/">AWS Prescriptive Guidance&lt;/a>&lt;/p>
&lt;h2 id="static-website">
 Static website
 &lt;a class="anchor" href="#static-website">#&lt;/a>
&lt;/h2>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/aws/architecture_static_website.drawio.svg" alt="static web application" />&lt;/p>
&lt;h2 id="web-application-with-relational-database">
 Web application with relational database
 &lt;a class="anchor" href="#web-application-with-relational-database">#&lt;/a>
&lt;/h2>
&lt;p>Use Fargate for ECS.&lt;/p>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/aws/architecture_webapp_with_database.drawio.svg" alt="web application with relational database" />&lt;/p>
&lt;h2 id="data-processing">
 Data processing
 &lt;a class="anchor" href="#data-processing">#&lt;/a>
&lt;/h2>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/aws/architecture_data_processing.drawio.svg" alt="data processing application" />&lt;/p>
&lt;h2 id="serverless-data-source-monitoring">
 Serverless data source monitoring
 &lt;a class="anchor" href="#serverless-data-source-monitoring">#&lt;/a>
&lt;/h2>
&lt;p>Problems:&lt;/p>
&lt;ul>
&lt;li>Monitoring&lt;/li>
&lt;li>Statistics&lt;/li>
&lt;li>Secrets management&lt;/li>
&lt;li>Configuration for Lambda functions&lt;/li>
&lt;/ul>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/aws/architecture_rest_data_monitoring.drawio.svg" alt="serverless application for monitoring rest data over time" />&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/aws/aws-cli/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/aws/aws-cli/</guid><description>&lt;h1 id="aws-command-line-interface">
 AWS command line interface
 &lt;a class="anchor" href="#aws-command-line-interface">#&lt;/a>
&lt;/h1>
&lt;ul>
&lt;li>
 &lt;a href="https://github.com/aws/aws-cli/tree/v2">GitHub project&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title/><link>https://dpurge.github.io/docs/devops/azure/exploring/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/azure/exploring/</guid><description>&lt;h1 id="exploring-azure-resources">
 Exploring Azure resources
 &lt;a class="anchor" href="#exploring-azure-resources">#&lt;/a>
&lt;/h1>
&lt;h2 id="list-subscription-and-tenant">
 List subscription and tenant
 &lt;a class="anchor" href="#list-subscription-and-tenant">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az account show --query &lt;span style="color:#e6db74">&amp;#34;{subscriptionId:id, tenantId:tenantId}&amp;#34;&lt;/span> -o table
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az login
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az account subscription list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="create-service-principal-for-rbac">
 Create service principal for RBAC
 &lt;a class="anchor" href="#create-service-principal-for-rbac">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az ad sp create-for-rbac --role Contributor --name my-name-001 --scope /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az cloud set -n AzureCloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az login --service-principal -u *** --password&lt;span style="color:#f92672">=&lt;/span>*** --tenant xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx --allow-no-subscriptions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az account set --subscription xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az aks get-credentials --resource-group &lt;span style="color:#66d9ef">$(&lt;/span>ResourceGroup&lt;span style="color:#66d9ef">)&lt;/span> --name &lt;span style="color:#66d9ef">$(&lt;/span>KubernetesService&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="find-vm-images">
 Find VM images
 &lt;a class="anchor" href="#find-vm-images">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az vm image list-offers --publisher Canonical --location westeurope -o table
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az vm image list-skus --publisher Canonical --offer 0001-com-ubuntu-server-jammy --location westeurope -o table
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az vm image list --all --publisher Canonical --offer 0001-com-ubuntu-server-jammy --sku 22_04-lts --location westeurope -o table
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Refer to this image: &lt;code>Canonical:0001-com-ubuntu-server-jammy:22_04-lts&lt;/code>&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/azure/snippets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/azure/snippets/</guid><description>&lt;h1 id="snippets">
 Snippets
 &lt;a class="anchor" href="#snippets">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az group create -g $group -l northeurope
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az vm create &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -n vm1 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -g $group &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -l northeurope &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --image Win2019Datacenter &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --admin-username $username &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --admin-password $password &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --nsg-rule rdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az appservice plan create &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -n web-plan &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -g $group &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -l northeurope &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --sku S1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az webapp create &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -n $appname &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -g $group &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -p web-plan
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az webapp list -g $group --query &lt;span style="color:#e6db74">&amp;#34;[].enabledHostNames&amp;#34;&lt;/span> -o jsonc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az group delete -g $group
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/blueprints/aws-3tier-webapp/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/blueprints/aws-3tier-webapp/</guid><description>&lt;h1 id="aws-3-tier-webapp">
 AWS 3-Tier webapp
 &lt;a class="anchor" href="#aws-3-tier-webapp">#&lt;/a>
&lt;/h1>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/blueprints/aws-3tier-webapp.excalidraw.svg" alt="AWS 3-Tier webapp" />&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/blueprints/aws-static-webapp/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/blueprints/aws-static-webapp/</guid><description>&lt;h1 id="aws-static-web-application">
 AWS static web application
 &lt;a class="anchor" href="#aws-static-web-application">#&lt;/a>
&lt;/h1>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/blueprints/aws-static-webapp.png" alt="AWS static web application" />&lt;/p>
&lt;p>Components:&lt;/p>
&lt;ul>
&lt;li>&lt;em>AWS Shield Standard&lt;/em> - free protection against common DDoS attacks,
applied automatically to CloudFront and Route 53.&lt;/li>
&lt;li>&lt;em>Route 53&lt;/em> - Domain Name System web service, performs domain registration,
DNS routing and health checking.&lt;/li>
&lt;li>&lt;em>Hosted Zone&lt;/em> - container for records specifying how to route traffic for a
specific domain.&lt;/li>
&lt;li>&lt;em>CloudFront&lt;/em> - content delivery network for distributing static content from
edge locations.&lt;/li>
&lt;li>&lt;em>S3 bucket&lt;/em> - cloud storage for web content&lt;/li>
&lt;li>&lt;em>Argo Workflows&lt;/em> - pipelines producing web content and publishing it to the
cloud storage&lt;/li>
&lt;/ul></description></item><item><title/><link>https://dpurge.github.io/docs/devops/blueprints/llm-closed-source/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/blueprints/llm-closed-source/</guid><description>&lt;h1 id="large-language-model-closed-source">
 Large language model (closed source)
 &lt;a class="anchor" href="#large-language-model-closed-source">#&lt;/a>
&lt;/h1>
&lt;p>
 &lt;img src="https://raw.githubusercontent.com/dpurge/dpurge.github.io/gh-pages/docs/devops/blueprints/llm-closed-source.excalidraw.svg" alt="LLM closed source" />&lt;/p>
&lt;h2 id="business-logic">
 Business logic
 &lt;a class="anchor" href="#business-logic">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://python.langchain.com/">LangChain&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://www.llamaindex.ai/">LlamaIndex&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://streamlit.io/">Streamlit&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="vector-database">
 Vector database
 &lt;a class="anchor" href="#vector-database">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://www.trychroma.com/">ChromaDB&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://qdrant.tech/">Qdrant&lt;/a>&lt;/li>
&lt;li>PostgreSQL/
 &lt;a href="https://github.com/pgvector/pgvector">PgVector&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="data-ingestion">
 Data ingestion
 &lt;a class="anchor" href="#data-ingestion">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://spark.apache.org/">Spark&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://airflow.apache.org/">Airflow&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="cache">
 Cache
 &lt;a class="anchor" href="#cache">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://redis.io/">Redis&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="feature-store">
 Feature store
 &lt;a class="anchor" href="#feature-store">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://feast.dev/">Feast&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://www.databricks.com/product/feature-store">Databricks feature store&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="prompt-management">
 Prompt management
 &lt;a class="anchor" href="#prompt-management">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://www.prompthub.us/">PromptHub&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="observability">
 Observability
 &lt;a class="anchor" href="#observability">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://arize.com/">Arize&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="llm-provider">
 LLM provider
 &lt;a class="anchor" href="#llm-provider">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://openai.com/">OpenAI ChatGPT&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://www.anthropic.com/">Anthropic Claude&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title/><link>https://dpurge.github.io/docs/devops/docker/azure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/docker/azure/</guid><description>&lt;h1 id="azure-from-docker">
 Azure from docker
 &lt;a class="anchor" href="#azure-from-docker">#&lt;/a>
&lt;/h1>
&lt;h2 id="access-to-the-storage-account">
 Access to the storage account
 &lt;a class="anchor" href="#access-to-the-storage-account">#&lt;/a>
&lt;/h2>
&lt;p>Dockerfile:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>FROM ubuntu:22.04
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RUN apt-get update &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> apt install -y ca-certificates pkg-config libfuse-dev cmake libcurl4-gnutls-dev libgnutls28-dev uuid-dev libgcrypt20-dev wget
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RUN wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> dpkg -i packages-microsoft-prod.deb &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span>	&lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> rm packages-microsoft-prod.deb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RUN apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RUN apt-get install -y blobfuse fuse
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RUN mkdir /storage-container
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>COPY fuse_connection.cfg /fuse_connection.cfg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Contents of &lt;code>fuse_connection.cfg&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>accountName mystgaccnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>accountKey xxxxxxxxxxxxxxxxxxxxxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>containerName test-data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Build and start the container:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/docker/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/docker/basics/</guid><description>&lt;h1 id="docker-basics">
 Docker basics
 &lt;a class="anchor" href="#docker-basics">#&lt;/a>
&lt;/h1></description></item><item><title/><link>https://dpurge.github.io/docs/devops/docker/compose/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/docker/compose/</guid><description>&lt;h1 id="docker-compose">
 Docker compose
 &lt;a class="anchor" href="#docker-compose">#&lt;/a>
&lt;/h1>
&lt;h2 id="cicd-test-environment">
 CI/CD test environment
 &lt;a class="anchor" href="#cicd-test-environment">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#ae81ff">3.8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pipeline&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">external&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">postgres&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">restart&lt;/span>: &lt;span style="color:#ae81ff">always&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">POSTGRES_USER=postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">POSTGRES_PASSWORD=postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">pipeline&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">5432&lt;/span>:&lt;span style="color:#ae81ff">5432&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">volume&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">target&lt;/span>: &lt;span style="color:#ae81ff">/var/lib/postgresql/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">bind&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">./init.sql&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">target&lt;/span>: &lt;span style="color:#ae81ff">/docker-entrypoint-initdb.d/init.sql&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pgadmin&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">dpage/pgadmin4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">pgadmin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">PGADMIN_DEFAULT_EMAIL=jdp@example.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">PGADMIN_DEFAULT_PASSWORD=pgadmin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">pipeline&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">15433&lt;/span>:&lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">volume&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">pgadmin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">target&lt;/span>: &lt;span style="color:#ae81ff">/var/lib/pgadmin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">gitea&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">gitea/gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">restart&lt;/span>: &lt;span style="color:#ae81ff">always&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">USER_UID=1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">USER_GID=1000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GITEA__database__DB_TYPE=postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GITEA__database__HOST=postgres:5432&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GITEA__database__NAME=gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GITEA__database__USER=gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">GITEA__database__PASSWD=gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">pipeline&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">3000&lt;/span>:&lt;span style="color:#ae81ff">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">222&lt;/span>:&lt;span style="color:#ae81ff">22&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">volume&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">gitea&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">target&lt;/span>: &lt;span style="color:#ae81ff">/data&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">depends_on&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">jenkins&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">jenkins/jenkins&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">container_name&lt;/span>: &lt;span style="color:#ae81ff">jenkins&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pribileged&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">user&lt;/span>: &lt;span style="color:#ae81ff">root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">restart&lt;/span>: &lt;span style="color:#ae81ff">always&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">environment&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">DOCKER_HOST=unix:///var/run/docker.sock&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">pipeline&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">8080&lt;/span>:&lt;span style="color:#ae81ff">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">50000&lt;/span>:&lt;span style="color:#ae81ff">50000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">bind&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">/var/run/docker.sock&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">target&lt;/span>: &lt;span style="color:#ae81ff">/var/run/docker.sock&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">volume&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">jenkins&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">target&lt;/span>: &lt;span style="color:#ae81ff">/var/jenkins_home&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">postgres&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pgadmin&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">gitea&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">jenkins&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>.env&lt;/code> file:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/docker/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/docker/installation/</guid><description>&lt;h1 id="docker-installation">
 Docker installation
 &lt;a class="anchor" href="#docker-installation">#&lt;/a>
&lt;/h1>
&lt;h2 id="windows">
 Windows
 &lt;a class="anchor" href="#windows">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p>
&lt;h2 id="linux">
 Linux
 &lt;a class="anchor" href="#linux">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p>
&lt;h2 id="wsl">
 WSL
 &lt;a class="anchor" href="#wsl">#&lt;/a>
&lt;/h2>
&lt;p>Enable integration in Docker Desktop: Settings -&amp;gt; Resources -&amp;gt; WSL Integration&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/docker/volumes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/docker/volumes/</guid><description>&lt;h1 id="docker-volumes">
 Docker volumes
 &lt;a class="anchor" href="#docker-volumes">#&lt;/a>
&lt;/h1>
&lt;p>Docker Desktop for Windows stores volumes in the WSL instance &lt;code>docker-desktop-data&lt;/code>.
It is used by Docker Desktop backend to store images and volumes.&lt;/p>
&lt;p>To export it:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>wsl --export docker-desktop-data docker-desktop-data.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="creating-and-removing-volumes">
 Creating and removing volumes
 &lt;a class="anchor" href="#creating-and-removing-volumes">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker volume create jdp_src
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker volume rm jdp_src
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="mounting-volumes">
 Mounting volumes
 &lt;a class="anchor" href="#mounting-volumes">#&lt;/a>
&lt;/h2>
&lt;p>Mounting simple volumes:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>docker run -it --rm --volume jdp_src:/src alpine
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker run -it --rm --mount source&lt;span style="color:#f92672">=&lt;/span>jdp_src,target&lt;span style="color:#f92672">=&lt;/span>/src alpine
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Mounting from WSL:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/gcp/definitions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/gcp/definitions/</guid><description>&lt;h1 id="definitions">
 Definitions
 &lt;a class="anchor" href="#definitions">#&lt;/a>
&lt;/h1>
&lt;dl>
&lt;dt>What is cloud computing?&lt;/dt>
&lt;dd>The delivery of a &lt;em>shared pool&lt;/em> of &lt;em>on-demand computing services&lt;/em> over the &lt;em>public internet&lt;/em>, that can be &lt;em>rapidly provisioned and released&lt;/em> with &lt;em>minimal&lt;/em> management effort or service provider interaction.&lt;/dd>
&lt;/dl>
&lt;ul>
&lt;li>provision resources automatically without requiring human interaction&lt;/li>
&lt;li>available over the network&lt;/li>
&lt;li>pooled resources to support a multi-tenant model allowing multiple customers to share the same applications or the same physical infrastructure&lt;/li>
&lt;li>rapidly provision and de-provision any of the cloud computing resources&lt;/li>
&lt;li>resource usage can be monitored, controlled and reported using metering capabilities&lt;/li>
&lt;/ul>
&lt;dl>
&lt;dt>Zone&lt;/dt>
&lt;dd>a deployment area within a region; the smallest entity of global infrastructure&lt;/dd>
&lt;dt>Region&lt;/dt>
&lt;dd>an indepenedent geographic area holding a collection of zones&lt;/dd>
&lt;dt>Multi-Region&lt;/dt>
&lt;dd>large geographic area holding two or more regions&lt;/dd>
&lt;/dl>
&lt;h2 id="compute">
 Compute
 &lt;a class="anchor" href="#compute">#&lt;/a>
&lt;/h2>
&lt;dl>
&lt;dt>Compute Engine&lt;/dt>
&lt;dd>(IaaS) virtual machines called &lt;em>instances&lt;/em> deployed from public or private images in a specific region and zone; pre-configured images on Google Cloud Marketplace; multiple instances managed with &lt;em>instance groups&lt;/em> and &lt;em>autoscaling&lt;/em>; attach/detach additional &lt;em>disks&lt;/em>; can use &lt;em>Google Cloud Storage&lt;/em>; accessed with &lt;em>ssh&lt;/em>&lt;/dd>
&lt;dt>GKE (Google Kubernetes Engine)&lt;/dt>
&lt;dd>(CaaS) container orchestrating system; built on open source Kubernetes; can integrate with on-premise Kubernetes; uses Compute Engine instances as nodes in a cluster&lt;/dd>
&lt;dt>App Engine&lt;/dt>
&lt;dd>(PaaS) managed serverless platform for hosting web applications at scale; provisions and patches servers and scales the application instances based on demand; build your app in Go, Java, .NET, NodeJS, PHP, Python, Ruby; seamlessly connects with Google services (storage, databases, &amp;hellip;); can connect to other cloud providers or external databases; integrates with &lt;em>Web Security Scanner&lt;/em> to identify vulnerabilities&lt;/dd>
&lt;dt>Cloud Functions&lt;/dt>
&lt;dd>(FaaS) serverless execution environment; simple, single-purpose functions triggered when a watched event is fired, executing in a fully managed environment; written in Java Script, Python 3, Go, Java; good for ETL, webhooks, APIs, mobile backend functions&lt;/dd>
&lt;dt>Cloud Run&lt;/dt>
&lt;dd>(FaaS) serverless for containers; managed compute platform for deploying and scaling containerized applications; built upon an open standard &lt;em>Knative&lt;/em>; abstracts away all infrastructure management; any language, library or binary&lt;/dd>
&lt;/dl>
&lt;h2 id="storage">
 Storage
 &lt;a class="anchor" href="#storage">#&lt;/a>
&lt;/h2>
&lt;dl>
&lt;dt>Cloud Storage&lt;/dt>
&lt;dd>consistent, scalable, large capacity, highly durable object storage; unlimited storage with no minimum object size; eleven nines durability (99.999999999%); excellent for content delivery, data lakes, backups; comes in different &lt;em>storage classes&lt;/em> (standard, nearline, coldline, archive) and &lt;em>availability&lt;/em> (region, dual-region, multi-region)&lt;/dd>
&lt;dt>Filestore&lt;/dt>
&lt;dd>fully managed NFS file server compliant with NFSv3; stores data for running applications in VM instances or Kubernetes clusters&lt;/dd>
&lt;dt>Persistent Disks&lt;/dt>
&lt;dd>durable block storage for instances; comes in two options (standard, solid state); available in zonal and regional option&lt;/dd>
&lt;/dl>
&lt;h2 id="databases">
 Databases
 &lt;a class="anchor" href="#databases">#&lt;/a>
&lt;/h2>
&lt;h3 id="sqlrelational">
 SQL/relational
 &lt;a class="anchor" href="#sqlrelational">#&lt;/a>
&lt;/h3>
&lt;dl>
&lt;dt>Cloud SQL&lt;/dt>
&lt;dd>managed PostgreSQL, MySQL or SQL Server; high availability across zones&lt;/dd>
&lt;dt>Cloud Spanner&lt;/dt>
&lt;dd>scalable relational database service; supports transactions, strong consistency, synchronous replication; high availability across regions and globally&lt;/dd>
&lt;/dl>
&lt;h3 id="nosql">
 NoSQL
 &lt;a class="anchor" href="#nosql">#&lt;/a>
&lt;/h3>
&lt;dl>
&lt;dt>Bigtable&lt;/dt>
&lt;dd>fully managed, scalable NoSQL DB; high throughput with low latency; cluster resizing without downtime&lt;/dd>
&lt;dt>Datastore&lt;/dt>
&lt;dd>fast, fully managed, serverless, NoSQL document database; for mobile, web and IoT apps; multi-region replication; ACID transactions&lt;/dd>
&lt;dt>Firestore&lt;/dt>
&lt;dd>NoSQL realtime database optimized for offline us; cluster resizing without downtime&lt;/dd>
&lt;dt>Memorystore&lt;/dt>
&lt;dd>fully managed, highly available in-memory service for Redis and Memcached&lt;/dd>
&lt;/dl>
&lt;h2 id="networking">
 Networking
 &lt;a class="anchor" href="#networking">#&lt;/a>
&lt;/h2>
&lt;dl>
&lt;dt>VPC (Virtual Private Cloud)&lt;/dt>
&lt;dd>core networking service, virtualized network within Google Cloud; global resource; each VPC contains a default network; additional networks can be created in your project, but networks cannot be shared between projects&lt;/dd>
&lt;dt>Firewall Rules&lt;/dt>
&lt;dd>a global distributed firewall that governs traffic comming into instances on a network; default network has a default set of firewall rules; custom rules can be created&lt;/dd>
&lt;dt>Routes&lt;/dt>
&lt;dd>advanced networking functions for instances; specifies how packets leaving an instance should be directed&lt;/dd>
&lt;/dl>
&lt;h2 id="load-balancing">
 Load Balancing
 &lt;a class="anchor" href="#load-balancing">#&lt;/a>
&lt;/h2>
&lt;p>Distribution of workloads across multiple instances.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/gcp/functions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/gcp/functions/</guid><description>&lt;h1 id="cloud-functions">
 Cloud functions
 &lt;a class="anchor" href="#cloud-functions">#&lt;/a>
&lt;/h1>
&lt;h2 id="manual-depoyment">
 Manual depoyment
 &lt;a class="anchor" href="#manual-depoyment">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud functions deploy my-function &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --source https://source.developers.google.com/projects/test1/repos/github_example_functions/moveable-aliases/main/paths/my-function &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --runtime nodejs16 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --trigger-http &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --entry-point helloWorld
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>When redeploying, do not specify runtime or trigger.&lt;/p>
&lt;h2 id="cloud-build-deployment">
 Cloud Build deployment
 &lt;a class="anchor" href="#cloud-build-deployment">#&lt;/a>
&lt;/h2>
&lt;p>Get project ID and project number and grant permissions:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud projects describe test1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud iam service-accounts add-iam-policy-binding PROJECT_ID@appspot.gserviceaccount.com --member PROJECT_NUMBER@cloudbuild.gserviceaccount.com --role roles/iam.serviceAccountUser
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud projects add-iam-policy-binding PROJRCT_ID --member serviceAccount:PROJECT_NUMBER@cloudbuild.gserviceaccount.com --role roles/cloudfunctions.developer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create &lt;code>cloudbuild.yaml&lt;/code>:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/gcp/gcloud/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/gcp/gcloud/</guid><description>&lt;h1 id="gcloud">
 GCloud
 &lt;a class="anchor" href="#gcloud">#&lt;/a>
&lt;/h1>
&lt;h2 id="console">
 Console
 &lt;a class="anchor" href="#console">#&lt;/a>
&lt;/h2>
&lt;p>
 &lt;a href="https://console.cloud.google.com/">Cloud console&lt;/a>&lt;/p>
&lt;h2 id="install">
 Install
 &lt;a class="anchor" href="#install">#&lt;/a>
&lt;/h2>
&lt;p>
 &lt;a href="https://cloud.google.com/sdk/docs/install-sdk">Google documentation&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># using snapcraft&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl status snapd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>snap search google-cloud-sdk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo snap install google-cloud-sdk --classic
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo snap remove google-cloud-sdk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm -rf ~/.config/gcloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># check&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>which gcloud
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>which gsutil
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>which bq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud help
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="initialize-environment">
 Initialize environment
 &lt;a class="anchor" href="#initialize-environment">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud auth list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="get-information">
 Get information
 &lt;a class="anchor" href="#get-information">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config configurations list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="modify-installation">
 Modify installation
 &lt;a class="anchor" href="#modify-installation">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud components list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud components install COMPONENT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud components remove COMPONENT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud components update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="switch-project">
 Switch project
 &lt;a class="anchor" href="#switch-project">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud projects list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config get-value project
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config set project PROJECT_ID
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="switch-account">
 Switch account
 &lt;a class="anchor" href="#switch-account">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud config configurations list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config configurations activate ACCOUNT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ls ~/.config/gcloud/configurations
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config configurations describe ACCOUNT
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># you can delete non-active configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud config configurations delete ACCOUNT
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="connect-to-cloud-shell">
 Connect to Cloud Shell
 &lt;a class="anchor" href="#connect-to-cloud-shell">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># create key-pair and connect&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud alpha cloud-shell ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="create-a-vpc">
 Create a VPC
 &lt;a class="anchor" href="#create-a-vpc">#&lt;/a>
&lt;/h2>
&lt;p>In Google Cloud VPC is global, it spans multiple regions.
Subnets are regional and span multiple zones within a region.
This is different from AWS.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/gcp/gke-workload-identity/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/gcp/gke-workload-identity/</guid><description>&lt;h1 id="gke-workload-identity">
 GKE Workload Identity
 &lt;a class="anchor" href="#gke-workload-identity">#&lt;/a>
&lt;/h1>
&lt;p>Source: 
 &lt;a href="https://github.com/antonputra/tutorials/blob/main/lessons/108/">&lt;/a>&lt;/p>
&lt;p>First create the bucket using console of &lt;code>gcloud&lt;/code> command.
Name must be globally unique.
Separate different environments in different buckets.
Use &lt;code>multi-region&lt;/code> for the location type, &lt;code>standard&lt;/code> for the storage class, enable &lt;code>object versioning&lt;/code> under protection tools.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 1-provider.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># https://registry.terraform.io/providers/hashicorp/google/latest/docs
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">provider&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;devops-v4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;us-central1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># https://www.terraform.io/language/settings/backends/gcs
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#a6e22e">terraform&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">backend&lt;/span> &lt;span style="color:#e6db74">&amp;#34;gcs&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">bucket&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;tf-state-staging&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">prefix&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;terraform/state&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">required_providers&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">google&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">source&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;hashicorp/google&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">version&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;~&amp;gt; 4.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enable API services and create VPC:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/gcp/gke/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/gcp/gke/</guid><description>&lt;h1 id="gke">
 GKE
 &lt;a class="anchor" href="#gke">#&lt;/a>
&lt;/h1>
&lt;p>
 &lt;a href="https://github.com/antonputra/tutorials/blob/main/lessons/069/">source: Anton Putra GitHub repo&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 0-provider.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">provider&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;us-west2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;random_integer&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">min&lt;/span> = &lt;span style="color:#ae81ff">100&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">max&lt;/span> = &lt;span style="color:#ae81ff">1000000&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">terraform&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">required_providers&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">google&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">source&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;hashicorp/google&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">version&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;~&amp;gt; 3.66&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">random&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">source&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;hashicorp/random&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">version&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;~&amp;gt; 3.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 1-locals.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">locals&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;us-west2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">org_id&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">billing_account&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">host_project_name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;host-staging&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">service_project_name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;k8s-staging&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">host_project_id&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">host_project_name&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">-&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">random_integer&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">result&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">service_project_id&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_name&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">-&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">random_integer&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">result&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">projects_api&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;container.googleapis.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">secondary_ip_ranges&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;pod-ip-range&amp;#34;&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;10.0.0.0/14&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;services-ip-range&amp;#34;&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;10.4.0.0/19&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 2-projects.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_project&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;host-staging&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">host_project_name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project_id&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">host_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">billing_account&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">billing_account&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">org_id&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">org_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">auto_create_network&lt;/span> = &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_project&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;k8s-staging&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project_id&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">billing_account&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">billing_account&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">org_id&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">org&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">auto_create_network&lt;/span> = &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_project_service&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;host&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">number&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">service&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">projects_api&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_project_service&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;service&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">number&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">service&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">projects_api&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 3-vpc.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_network&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;main&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;main&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_compute_shared_vpc_hosts_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>.&lt;span style="color:#a6e22e">project&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">auto_create_subnetworks&lt;/span> = &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">routing_mode&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;REGIONAL&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">mtu&lt;/span> = &lt;span style="color:#ae81ff">1500&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_subnetwork&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;private&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;private&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_compute_shared_vpc_hosts_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>.&lt;span style="color:#a6e22e">project&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ip_cidr_range&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;10.5.0.0/20&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">region&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">network&lt;/span> = &lt;span style="color:#a6e22e">google_compute_network&lt;/span>.&lt;span style="color:#a6e22e">main&lt;/span>.&lt;span style="color:#a6e22e">self_link&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">private_ip_google_access&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">dynamic&lt;/span> &lt;span style="color:#e6db74">&amp;#34;secondary_ip_range&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">for_each&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">secondary_ip_ranges&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">content&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">range_name&lt;/span> = &lt;span style="color:#a6e22e">secondary_ip_range&lt;/span>.&lt;span style="color:#a6e22e">key&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ip_cidr_range&lt;/span> = &lt;span style="color:#a6e22e">secondary_ip_range&lt;/span>.&lt;span style="color:#a6e22e">value&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 4-router.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_router&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;router&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;router&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">region&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">hosts_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">network&lt;/span> = &lt;span style="color:#a6e22e">google_compute_network&lt;/span>.&lt;span style="color:#a6e22e">main&lt;/span>.&lt;span style="color:#a6e22e">self_link&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 5-nat.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_router_nat&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;mist_nat&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;nat&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">hosts_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">router&lt;/span> = &lt;span style="color:#a6e22e">google_compute_router&lt;/span>.&lt;span style="color:#a6e22e">router&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">region&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">nat_ip_allocate_option&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;AUTO_ONLY&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">source_subnetwork_ip_ranges_to_nat&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;ALL_SUBNETWORKS_ALL_IP_RANGES&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">depends_on&lt;/span> = [&lt;span style="color:#a6e22e">google_compute_subnetwork&lt;/span>.&lt;span style="color:#a6e22e">private&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 6-shared-vpc.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_shared_vpc_host_project&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;host&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">number&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_shared_vpc_service_project&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;service&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">host_project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">host_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">service_project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">depends_on&lt;/span> = [&lt;span style="color:#a6e22e">google_compute_shared_vpc_host_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_compute_subnetwork_iam_binding&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;binding&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_compute_shared_vpc_host_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>.&lt;span style="color:#a6e22e">project&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#a6e22e">google_compute_subnetwork&lt;/span>.&lt;span style="color:#a6e22e">private&lt;/span>.&lt;span style="color:#a6e22e">region&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">subnetwork&lt;/span> = &lt;span style="color:#a6e22e">google_compute_subnetwork&lt;/span>.&lt;span style="color:#a6e22e">private&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">role&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;roles/compute.networkUser&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">members&lt;/span> = [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;serviceAccount:&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">google_service_account&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">email&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;serviceAccount:&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">number&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">@cloudservices.gserviceaccount.com&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;serviceAccount:service-&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">number&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">@container-engine-robot.iam.gserviceaccount.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_project_iam_binding&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;container-engine&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">google_compute_shared_vpc_host_project&lt;/span>.&lt;span style="color:#a6e22e">host&lt;/span>.&lt;span style="color:#a6e22e">project&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">role&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;roles/container.hostServiceAgentUser&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">members&lt;/span> = [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;serviceAccount:service-&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">number&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">@container-engine-robot.iam.gserviceaccount.com&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">depends_on&lt;/span> = [&lt;span style="color:#a6e22e">google_project_service&lt;/span>.&lt;span style="color:#a6e22e">service&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 7-kubernetes.tf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_service_account&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;k8s-staging&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">account_id&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;k8s-staging&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">depends_on&lt;/span> = [&lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_container_cluster&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;gke&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;gke&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">location&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">region&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">networking_mode&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;VPC_NATIVE&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">network&lt;/span> = &lt;span style="color:#a6e22e">google_compute_network&lt;/span>.&lt;span style="color:#a6e22e">main&lt;/span>.&lt;span style="color:#a6e22e">self_link&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">subnetwork&lt;/span> = &lt;span style="color:#a6e22e">google_compute_subnetwork&lt;/span>.&lt;span style="color:#a6e22e">private&lt;/span>.&lt;span style="color:#a6e22e">self_link&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">remove_default_node_pool&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">initial_node_count&lt;/span> = &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">release_channel&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">channel&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;REGULAR&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ip_allocation_policy&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cluster_secondary_range_name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;pod-ip-range&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">services_secondary_range_name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;services-ip-range&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">network_policy&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef"> provider&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;PROVIDER_UNSPECIFIED&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">enabled&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">private_cluster_config&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">enable_private_endpoint&lt;/span> = &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">enable_private_nodes&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">master_ipv4_cidr_block&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;172.16.0.0/28&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">workload_identity_config&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">identity_namespace&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>&lt;span style="color:#a6e22e">google_project&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">project_id&lt;/span>&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">.svc.id.goog&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;google_container_node_pool&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;general&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;general&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">location&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">region&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cluster&lt;/span> = &lt;span style="color:#a6e22e">google_container_cluster&lt;/span>.&lt;span style="color:#a6e22e">gke&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">project&lt;/span> = &lt;span style="color:#a6e22e">local&lt;/span>.&lt;span style="color:#a6e22e">service_project_id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">node_count&lt;/span> = &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">management&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">auto_repair&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">auto_upgrade&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">node_config&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">labels&lt;/span> = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">role&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;general&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">machine_type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;e2-medium&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">service_account&lt;/span> = &lt;span style="color:#a6e22e">google_service_account&lt;/span>.&lt;span style="color:#a6e22e">k8s&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">staging&lt;/span>.&lt;span style="color:#a6e22e">email&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">oauth_scopes&lt;/span> = [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;https://www.googleapis.com/auth/cloud-platform&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud auth application-default login
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform fmt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform validate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform plan
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform apply
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcloud container clusters get-credentials gke --region us-west2 --project k8s-staging-000000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get svc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get nodes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Example load balacer in Kubernetes:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/gcp/vpc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/gcp/vpc/</guid><description>&lt;h1 id="vpc">
 VPC
 &lt;a class="anchor" href="#vpc">#&lt;/a>
&lt;/h1>
&lt;p>Create regional network with custom subnets.&lt;/p>
&lt;p>Public subnet will have a default internet gateway.&lt;/p>
&lt;p>Private subnet will have NAT gateway as its route.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud compute networks create main --bgp-routing-mode&lt;span style="color:#f92672">=&lt;/span>regional --subnet-mode&lt;span style="color:#f92672">=&lt;/span>custom
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add public subnet:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud compute networks subnets create public --range&lt;span style="color:#f92672">=&lt;/span>10.0.0.0/24 --network&lt;span style="color:#f92672">=&lt;/span>main --region&lt;span style="color:#f92672">=&lt;/span>us-west2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create private subnet:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud compute networks subnets create private --range&lt;span style="color:#f92672">=&lt;/span>10.0.1.0/24 --network&lt;span style="color:#f92672">=&lt;/span>main --region&lt;span style="color:#f92672">=&lt;/span>us-west2 --enable-private-ip-google-access
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create cloud router:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>gcloud compute routers create router --network&lt;span style="color:#f92672">=&lt;/span>main --region&lt;span style="color:#f92672">=&lt;/span>us-west2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create cloud NAT gateway and select IP ranges:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/git/branches/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/git/branches/</guid><description>&lt;h1 id="branches">
 Branches
 &lt;a class="anchor" href="#branches">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>git remote rm origin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git remote add origin https://xxxx/xxxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git push origin --all
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>New branch:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>git checkout -b &amp;lt;branch&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git push -u origin &amp;lt;branch&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Merge:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>git checkout master
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git merge hotfix
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>List tags:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>git fetch --tags
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git push --tags
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/git/configuration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/git/configuration/</guid><description>&lt;h1 id="configuration-of-git">
 Configuration of git
 &lt;a class="anchor" href="#configuration-of-git">#&lt;/a>
&lt;/h1>
&lt;h2 id="username-and-email">
 Username and email
 &lt;a class="anchor" href="#username-and-email">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>git config --global user.name &lt;span style="color:#e6db74">&amp;#34;D. Purge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global user.email &lt;span style="color:#e6db74">&amp;#34;my@email.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git config --global core.autocrlf false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ssh-checkouts-from-azure-devops">
 SSH checkouts from Azure DevOps
 &lt;a class="anchor" href="#ssh-checkouts-from-azure-devops">#&lt;/a>
&lt;/h2>
&lt;p>Generate SSH keypair:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>ssh-keygen -t rsa
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Full parameters:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>ssh-keygen &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -m PEM &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -t rsa &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -b &lt;span style="color:#ae81ff">4096&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -C &lt;span style="color:#e6db74">&amp;#34;user@server.example.com&amp;#34;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -f ~/.ssh/mykeys/privatekey &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -N passphrase
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;em>-m PEM&lt;/em> = format key as PEM&lt;/li>
&lt;li>&lt;em>-t RSA&lt;/em> = type of the key, RSA format&lt;/li>
&lt;li>&lt;em>-b 4096&lt;/em> = number of bits in the key, 4096 bits&lt;/li>
&lt;li>&lt;em>-C &amp;ldquo;
 &lt;a href="mailto:user@server.example.com">user@server.example.com&lt;/a>&amp;rdquo;&lt;/em> = a comment appended at the end of the public key, to identify it&lt;/li>
&lt;li>&lt;em>-f ~/.ssh/mykeys/privatekey&lt;/em> = the filename of the private key filet,
a corresponding public key file appended with &lt;code>.pub&lt;/code> is generated in the same directory which must exist&lt;/li>
&lt;li>&lt;em>-N passphrase&lt;/em> = a passphrase used to access the private key file&lt;/li>
&lt;/ul>
&lt;p>Add configuration in &lt;code>~/.ssh/config&lt;/code>:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/helm/charts/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/helm/charts/</guid><description>&lt;h1 id="charts">
 Charts
 &lt;a class="anchor" href="#charts">#&lt;/a>
&lt;/h1>
&lt;h2 id="download">
 Download
 &lt;a class="anchor" href="#download">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>mkdir cluster-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd cluster-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm pull --help
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm pull bitnami/mysql --untar&lt;span style="color:#f92672">=&lt;/span>true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm install mysql ./mysql/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm upgrade mysql --values&lt;span style="color:#f92672">=&lt;/span>./mysql/custom-values.yaml ./mysql/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="convert-to-k8s-configuration">
 Convert to k8s configuration
 &lt;a class="anchor" href="#convert-to-k8s-configuration">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>helm template mysql ./mysql/ --values&lt;span style="color:#f92672">=&lt;/span>./mysql/custom-values.yaml &amp;gt; mysql-installation.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="create-charts">
 Create charts
 &lt;a class="anchor" href="#create-charts">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>helm create example-helm-chart
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd example-helm-chart/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm template . &lt;span style="color:#75715e"># to test the output&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Reference values in the template: &lt;code>{{ .Values.MyKey }}&lt;/code>&lt;/p>
&lt;p>Call function in the template with space-separated list of parameters: &lt;code>{{ lower .Values.MyKey }}&lt;/code>&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/helm/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/helm/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>
&lt;h2 id="linux">
 Linux
 &lt;a class="anchor" href="#linux">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p>
&lt;p>Install &lt;code>Helm&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export HELM_VERSION&lt;span style="color:#f92672">=&lt;/span>3.9.2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /tmp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -sSL https://get.helm.sh/helm-v&lt;span style="color:#e6db74">${&lt;/span>HELM_VERSION&lt;span style="color:#e6db74">}&lt;/span>-linux-amd64.tar.gz &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -o helm.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xf helm.tar.gz linux-amd64/helm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv linux-amd64/helm /usr/local/bin/helm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rmdir linux-amd64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm helm.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="packages">
 Packages
 &lt;a class="anchor" href="#packages">#&lt;/a>
&lt;/h2>
&lt;p>Find helm charts on 
 &lt;a href="https://artifacthub.io/">https://artifacthub.io/&lt;/a>&lt;/p>
&lt;h2 id="example-usage">
 Example usage
 &lt;a class="anchor" href="#example-usage">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>helm repo list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm repo add bitnami https://charts.bitnami.com/bitnami
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm repo update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm install mysql bitnami/mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm uninstall mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Find chart values:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>helm show values bitnami/mysql &amp;gt; values.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vim values.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm upgrade mysql bitnami/mysql --set section.name&lt;span style="color:#f92672">=&lt;/span>value
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm upgrade mysql bitnami/mysql --values&lt;span style="color:#f92672">=&lt;/span>values.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/k3s/k3d/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/k3s/k3d/</guid><description>&lt;h1 id="k3d">
 K3d
 &lt;a class="anchor" href="#k3d">#&lt;/a>
&lt;/h1>
&lt;p>K3d is a wrapper of K3s.
K3d deploys docker based k3s clusters.&lt;/p>
&lt;h2 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h2>
&lt;p>K3d CLI binaries:&lt;/p>
&lt;ul>
&lt;li>
 &lt;a href="https://github.com/k3d-io/k3d/releases/download/v5.4.8/k3d-windows-amd64.exe">https://github.com/k3d-io/k3d/releases/download/v5.4.8/k3d-windows-amd64.exe&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://github.com/k3d-io/k3d/releases/download/v5.4.8/k3d-linux-amd64">https://github.com/k3d-io/k3d/releases/download/v5.4.8/k3d-linux-amd64&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="test">
 Test
 &lt;a class="anchor" href="#test">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>k3d cluster create mycluster
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl cluster-info
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get all
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>k3d cluster delete mycluster
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/k3s/k3s/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/k3s/k3s/</guid><description>&lt;h1 id="k3s">
 K3s
 &lt;a class="anchor" href="#k3s">#&lt;/a>
&lt;/h1>
&lt;p>K3s deploys a virtual machine-based Kubernetes cluster.&lt;/p>
&lt;h2 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>curl -Lo /usr/local/bin/k3s https://github.com/k3s-io/k3s/releases/download/v1.27.5%2Bk3s1/k3s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod a+x /usr/local/bin/k3s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>curl -Lo /usr/local/bin/kubectl &lt;span style="color:#e6db74">&amp;#34;https://dl.k8s.io/release/&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>curl -L -s https://dl.k8s.io/release/stable.txt&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">/bin/linux/amd64/kubectl&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod a+x /usr/local/bin/kubectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="maintenance">
 Maintenance
 &lt;a class="anchor" href="#maintenance">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo k3s crictl images
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo k3s crictl rmi --prune
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="test">
 Test
 &lt;a class="anchor" href="#test">#&lt;/a>
&lt;/h2>
&lt;p>Start server:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>K3S_KUBECONFIG_MODE&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;644&amp;#34;&lt;/span> k3s server --flannel-backend none
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Access server:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export KUBECONFIG&lt;span style="color:#f92672">=&lt;/span>/etc/rancher/k3s/k3s.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods --all-namespaces
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>helm ls --all-namespaces
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install in LXD container:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo su -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /tmp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl https://get.k3s.io/ -o k3s.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod +x k3s.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./k3s.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl status k3s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>k3s check-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Troubleshooting:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/azure-kubernetes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/azure-kubernetes/</guid><description>&lt;h1 id="kubernetes-on-azure">
 Kubernetes on Azure
 &lt;a class="anchor" href="#kubernetes-on-azure">#&lt;/a>
&lt;/h1>
&lt;h2 id="deployment-to-cluster">
 Deployment to cluster
 &lt;a class="anchor" href="#deployment-to-cluster">#&lt;/a>
&lt;/h2>
&lt;p>Connect to Azure container registry:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az account set --subscription $SubscriptionID
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az aks get-credentials --resource-group ResGrp-Name001 --name acrname001
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create namespace YAML:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl create namespace my-namespace-name -o yaml --dry-run&lt;span style="color:#f92672">=&lt;/span>client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create deployment YAML:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl create deployment image-name --image&lt;span style="color:#f92672">=&lt;/span>acrname001.azurecr.io/image_name:1.0.0 -o yaml --dry-run&lt;span style="color:#f92672">=&lt;/span>client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Apply namespace YAML:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl apply -f namespace.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get namespaces
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Apply deployment YAML:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl apply -f image-name-deployment.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl logs -f deployment/image-name --namespace my-namespace-name
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check deployments:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/deployment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/deployment/</guid><description>&lt;h1 id="deployment">
 Deployment
 &lt;a class="anchor" href="#deployment">#&lt;/a>
&lt;/h1>
&lt;p>&lt;code>Deployment&lt;/code> is a wrapper around replica set, which allows to do controlled updates to pods.
When we update the pod template in the deployment, it will update the pods.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">apps/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">replicas&lt;/span>: &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchLabels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">template&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">hello-container&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">busybox&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: [&lt;span style="color:#e6db74">&amp;#39;sh&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;-c&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;echo Hello from deployment! &amp;amp;&amp;amp; sleep 3600&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl apply -f deployment.yaml --record
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get deployment
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get rs
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pod
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl scale deployment hello --replicas&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">5&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get po --watch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl scale deploy hello --replicas&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl set image deploy hello hello-container&lt;span style="color:#f92672">=&lt;/span>busybox:1.31.1 --record
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl rollout history deploy hello
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl rollout undo deploy hello
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Deployment strategies:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/design-patterns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/design-patterns/</guid><description>&lt;h1 id="kubernetes-design-patterns">
 Kubernetes design patterns
 &lt;a class="anchor" href="#kubernetes-design-patterns">#&lt;/a>
&lt;/h1>
&lt;h2 id="foundational">
 Foundational
 &lt;a class="anchor" href="#foundational">#&lt;/a>
&lt;/h2>
&lt;h3 id="health-probe">
 Health probe
 &lt;a class="anchor" href="#health-probe">#&lt;/a>
&lt;/h3>
&lt;p>Every container should implement APIs allowing the platform to observe and manage the application.&lt;/p>
&lt;h3 id="predictable-demands">
 Predictable demands
 &lt;a class="anchor" href="#predictable-demands">#&lt;/a>
&lt;/h3>
&lt;p>Every container should declare its resource requirements and runtime dependencies and stay confined to them.&lt;/p>
&lt;h3 id="automated-placement">
 Automated placement
 &lt;a class="anchor" href="#automated-placement">#&lt;/a>
&lt;/h3>
&lt;h3 id="declarative-deployment">
 Declarative Deployment
 &lt;a class="anchor" href="#declarative-deployment">#&lt;/a>
&lt;/h3>
&lt;h3 id="managed-lifecycle">
 Managed Lifecycle
 &lt;a class="anchor" href="#managed-lifecycle">#&lt;/a>
&lt;/h3>
&lt;h2 id="structural">
 Structural
 &lt;a class="anchor" href="#structural">#&lt;/a>
&lt;/h2>
&lt;h3 id="init-container">
 Init Container
 &lt;a class="anchor" href="#init-container">#&lt;/a>
&lt;/h3>
&lt;h3 id="sidecar">
 Sidecar
 &lt;a class="anchor" href="#sidecar">#&lt;/a>
&lt;/h3>
&lt;h3 id="adapter">
 Adapter
 &lt;a class="anchor" href="#adapter">#&lt;/a>
&lt;/h3>
&lt;h3 id="ambassador">
 Ambassador
 &lt;a class="anchor" href="#ambassador">#&lt;/a>
&lt;/h3>
&lt;h2 id="configuration">
 Configuration
 &lt;a class="anchor" href="#configuration">#&lt;/a>
&lt;/h2>
&lt;h3 id="envvar-configuration">
 EnvVar Configuration
 &lt;a class="anchor" href="#envvar-configuration">#&lt;/a>
&lt;/h3>
&lt;h3 id="immutable-configuration">
 Immutable Configuration
 &lt;a class="anchor" href="#immutable-configuration">#&lt;/a>
&lt;/h3>
&lt;h3 id="configuration-template">
 Configuration Template
 &lt;a class="anchor" href="#configuration-template">#&lt;/a>
&lt;/h3>
&lt;h3 id="configuration-resource">
 Configuration Resource
 &lt;a class="anchor" href="#configuration-resource">#&lt;/a>
&lt;/h3>
&lt;h2 id="behavioral">
 Behavioral
 &lt;a class="anchor" href="#behavioral">#&lt;/a>
&lt;/h2>
&lt;h3 id="batch-job">
 Batch Job
 &lt;a class="anchor" href="#batch-job">#&lt;/a>
&lt;/h3>
&lt;h3 id="stateful-service">
 Stateful Service
 &lt;a class="anchor" href="#stateful-service">#&lt;/a>
&lt;/h3>
&lt;h3 id="service-discovery">
 Service Discovery
 &lt;a class="anchor" href="#service-discovery">#&lt;/a>
&lt;/h3>
&lt;h3 id="periodic-job">
 Periodic Job
 &lt;a class="anchor" href="#periodic-job">#&lt;/a>
&lt;/h3>
&lt;h3 id="stateless-service">
 Stateless Service
 &lt;a class="anchor" href="#stateless-service">#&lt;/a>
&lt;/h3>
&lt;h3 id="singleton-service">
 Singleton Service
 &lt;a class="anchor" href="#singleton-service">#&lt;/a>
&lt;/h3>
&lt;h2 id="higher-level">
 Higher Level
 &lt;a class="anchor" href="#higher-level">#&lt;/a>
&lt;/h2>
&lt;h3 id="controller">
 Controller
 &lt;a class="anchor" href="#controller">#&lt;/a>
&lt;/h3>
&lt;h3 id="operator">
 Operator
 &lt;a class="anchor" href="#operator">#&lt;/a>
&lt;/h3>
&lt;h3 id="serverless-serving">
 Serverless Serving
 &lt;a class="anchor" href="#serverless-serving">#&lt;/a>
&lt;/h3>
&lt;h3 id="serverless-eventing">
 Serverless Eventing
 &lt;a class="anchor" href="#serverless-eventing">#&lt;/a>
&lt;/h3>
&lt;h3 id="elastic-scale">
 Elastic Scale
 &lt;a class="anchor" href="#elastic-scale">#&lt;/a>
&lt;/h3>
&lt;h3 id="image-builder">
 Image Builder
 &lt;a class="anchor" href="#image-builder">#&lt;/a>
&lt;/h3></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/ingress/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/ingress/</guid><description>&lt;h1 id="ingress">
 Ingress
 &lt;a class="anchor" href="#ingress">#&lt;/a>
&lt;/h1>
&lt;p>&lt;code>Ingress&lt;/code> resource exposes multiple services to the outside of the cluster and manages access.
It is a collection of rules and paths but needs something to apply these rules the &lt;code>Ingress controller&lt;/code>.
Ingress controller acts as a gateway and routes external traffic to services based on the Ingress resource and its rules.&lt;/p>
&lt;p>Ingress controller is a collection of:&lt;/p>
&lt;ul>
&lt;li>kubernetes deployment, with pods running containers with a gateway or proxy server, eg. nginx, ambassador&lt;/li>
&lt;li>kubernetes service that exposes ingress controller pods&lt;/li>
&lt;li>supporting resources: configuration maps, secrets etc.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">networking.k8s.io/v1beta1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Ingress&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">ingress-example&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">rules&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">host&lt;/span>: &lt;span style="color:#ae81ff">example.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">http&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">paths&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/blog&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">serviceName&lt;/span>: &lt;span style="color:#ae81ff">blogservice&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">servicePort&lt;/span>: &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/music&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">backend&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">serviceName&lt;/span>: &lt;span style="color:#ae81ff">musicservice&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">servicePort&lt;/span>: &lt;span style="color:#ae81ff">8080&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ingress controller will have annotations that depend on the type of Ingress Controller you are using (Traeffik. Nginx, HAProxy, Ambassador, &amp;hellip;)&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/k9s/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/k9s/</guid><description>&lt;h1 id="k9s">
 K9s
 &lt;a class="anchor" href="#k9s">#&lt;/a>
&lt;/h1>
&lt;ul>
&lt;li>
 &lt;a href="https://k9scli.io/">Home page&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://github.com/derailed/k9s">GitHub repository&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://github.com/derailed/k9s/releases">Releases&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h2>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-k9s-setup" id="tabs-k9s-setup-0" checked="checked" />
 &lt;label for="tabs-k9s-setup-0">Windows&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$K9s_Version = &lt;span style="color:#e6db74">&amp;#34;0.27.4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$K2s_Archive = &lt;span style="color:#e6db74">&amp;#34;https://github.com/derailed/k9s/releases/download/v&lt;/span>${K9s_Version}&lt;span style="color:#e6db74">/k9s_Windows_amd64.zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Invoke-WebRequest -Uri $K2s_Archive -OutFile &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/k9s_Windows_amd64_&lt;/span>${K9s_Version}&lt;span style="color:#e6db74">.zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Add-Type -Assembly System.IO.Compression.FileSystem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$zip = [&lt;span style="color:#66d9ef">IO.Compression.ZipFile&lt;/span>]::OpenRead(&lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/k9s_Windows_amd64_&lt;/span>${K9s_Version}&lt;span style="color:#e6db74">.zip&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$Executables = $zip.Entries | Where-Object {$_.Name &lt;span style="color:#f92672">-like&lt;/span> &lt;span style="color:#e6db74">&amp;#39;*.exe&amp;#39;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($Executable &lt;span style="color:#66d9ef">in&lt;/span> $Executables) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">System.IO.Compression.ZipFileExtensions&lt;/span>]::ExtractToFile($Executable, &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/&lt;/span>$($Executable.Name)&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, $True)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$zip.Dispose()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Remove-Item -Path &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/k9s_Windows_amd64_&lt;/span>${K9s_Version}&lt;span style="color:#e6db74">.zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;input type="radio" class="toggle" name="tabs-k9s-setup" id="tabs-k9s-setup-1" />
 &lt;label for="tabs-k9s-setup-1">Linux&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">TODO&lt;/div>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/kubectl-config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/kubectl-config/</guid><description>&lt;h1 id="kubectl-configuration">
 KubeCtl configuration
 &lt;a class="anchor" href="#kubectl-configuration">#&lt;/a>
&lt;/h1>
&lt;h2 id="configuration-files">
 Configuration files
 &lt;a class="anchor" href="#configuration-files">#&lt;/a>
&lt;/h2>
&lt;p>Default file:&lt;/p>
&lt;ul>
&lt;li>&lt;code>~/.kube/config&lt;/code>&lt;/li>
&lt;li>&lt;code>%USERPROFILE%\.kube\config&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Multiple files defined in environment variable:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> KUBECONFIG=%USERPROFILE%\.kube\config;%USERPROFILE%\.kube\jdpnas02.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>KUBECONFIG&lt;span style="color:#f92672">=&lt;/span>~/.kube/config:~/.kube/jdpnas02.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Display configured contexts:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl config get-contexts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Display merged configs:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl config view
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Show current context:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl config current-context
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Set default context:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl config use-context jdpnas02
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>az account set --subscription xxxxxxxxxxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az aks get-credentials --resource-group ResGrp-xxx-K8s --name xxxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl config current-context
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get all --namespace xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get cronjob --namespace xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl describe cronjob --namespace xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods --namespace xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl logs --namespace xxx integration-sync-28023457-cbg4j
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl delete job --namespace xxx integration-sync-28023332
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl delete cronjob integration-sync --namespace xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl exec --stdin --tty xxx-867d77f465-tkcdk --namespace xxx -- /bin/bash
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -X POST 127.0.0.1/sync --data &lt;span style="color:#e6db74">&amp;#39;{&amp;#34;time_to_sync&amp;#34;: 240}&amp;#39;&lt;/span> --header &lt;span style="color:#e6db74">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/minikube/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/minikube/</guid><description>&lt;h1 id="minikube">
 Minikube
 &lt;a class="anchor" href="#minikube">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>minikube delete
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>minikube start --memory &lt;span style="color:#ae81ff">4096&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Edit service xxx:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl edit svc xxx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/pod/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/pod/</guid><description>&lt;h1 id="pod">
 Pod
 &lt;a class="anchor" href="#pod">#&lt;/a>
&lt;/h1>
&lt;p>A &lt;code>pod&lt;/code> is a collection of containers that share network and storage.
Containers within a pod can talk to each other on &lt;code>localhost&lt;/code> and can access the same volumes.
Pods are ephemeral.
Kubernetes assigns a unique IP address to a pod.
Containers within a pod can listen on different ports.&lt;/p>
&lt;p>When the pod restarts, it gets a different IP address.
A &lt;code>service&lt;/code> is an abstraction that gets a stable IP address and DNS name and acts as a load balancer for pods.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/replica-set/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/replica-set/</guid><description>&lt;h1 id="replica-set">
 Replica set
 &lt;a class="anchor" href="#replica-set">#&lt;/a>
&lt;/h1>
&lt;p>&lt;code>Replica set&lt;/code> maintains a stamble number of pod copies (replicas).&lt;/p>
&lt;p>Replica set controller guarantees that a specified nymber of identical pods are running at all times.
It uses the selector field and pod labels to find pods that it owns.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">apps/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">ReplicaSet&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">replicas&lt;/span>: &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchLabels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">template&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">hello&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">hello-container&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">busybox&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: [&lt;span style="color:#e6db74">&amp;#34;sh&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;-c&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;echo Hello from replica set! &amp;amp;&amp;amp; sleep 3600&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl apply -f replicaset.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get replicaset
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods -l app.kubernetes.io/name&lt;span style="color:#f92672">=&lt;/span>hello
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods hello-xxxxx -o yaml | grep -A5 ownerReferences
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl delete po hello-xxxxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl edit rs hello
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get po hello-xxxxx | grep Image
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl delete rs hello
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Replica set can be managed by a &lt;code>deployment&lt;/code>, which can update pods managed by this replica set in a controlled, zero-downtime manner.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/sealed-secrets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/sealed-secrets/</guid><description>&lt;h1 id="sealed-secrets">
 Sealed secrets
 &lt;a class="anchor" href="#sealed-secrets">#&lt;/a>
&lt;/h1>
&lt;h2 id="install-kubeseal">
 Install &lt;code>kubeseal&lt;/code>
 &lt;a class="anchor" href="#install-kubeseal">#&lt;/a>
&lt;/h2>
&lt;p>Command line:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>curl -sSL https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.19.3/kubeseal-0.19.3-linux-amd64.tar.gz -o kubeseal-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar -xf kubeseal-linux-amd64.tar.gz kubeseal
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv kubeseal /usr/local/bin/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubeseal --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Controller:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.19.3/controller.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get pods -n kube-system | grep sealed-secrets-controller
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl logs sealed-secrets-controller-xxx-xxx -n kube-system
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get secret -n kube-system -l sealedsecrets.bitnami.com/sealed-secrets-key -o yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/service/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/service/</guid><description>&lt;h1 id="service">
 Service
 &lt;a class="anchor" href="#service">#&lt;/a>
&lt;/h1>
&lt;p>Pods are ephemeral, so we cannot rely on pod IP addresses.&lt;/p>
&lt;p>Example deployment:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">apps/v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">web-frontend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">web-frontend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">replicas&lt;/span>: &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">selector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchLabels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">web-frontend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">template&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">app.kubernetes.io/name&lt;/span>: &lt;span style="color:#ae81ff">web-frontend&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">web-frontend-container&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">projectid/helloworld:0.1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">containerPort&lt;/span>: &lt;span style="color:#ae81ff">3000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>kubectl apply -f web-frontend.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get po -o wide
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl run curl --image&lt;span style="color:#f92672">=&lt;/span>radial/busyboxplus:curl -i --tty
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl 172.17.0.6:3000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Pod&amp;rsquo;s IP is available only from within the cluster.&lt;/p>
&lt;p>Kubernetes &lt;code>service&lt;/code> is an abstraction which gives us access to pod&amp;rsquo;s IP in a reliable way.
Service controller maintains a list of pod endpoints/IP addresses.
It uses selectors and labels to find its pods.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/kubernetes/short-names/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/kubernetes/short-names/</guid><description>&lt;h1 id="resource-short-names">
 Resource short names
 &lt;a class="anchor" href="#resource-short-names">#&lt;/a>
&lt;/h1>
&lt;p>Short names can be displayed with a command: &lt;code>kubectl api-resources&lt;/code>&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">Name&lt;/th>
 &lt;th style="text-align: left">Short name&lt;/th>
 &lt;th style="text-align: left">Kind&lt;/th>
 &lt;th style="text-align: left">API version&lt;/th>
 &lt;th style="text-align: left">Namespaced&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">pods&lt;/td>
 &lt;td style="text-align: left">po&lt;/td>
 &lt;td style="text-align: left">Pod&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">replicasets&lt;/td>
 &lt;td style="text-align: left">rs&lt;/td>
 &lt;td style="text-align: left">ReplicaSet&lt;/td>
 &lt;td style="text-align: left">apps/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">deployments&lt;/td>
 &lt;td style="text-align: left">deploy&lt;/td>
 &lt;td style="text-align: left">Deployment&lt;/td>
 &lt;td style="text-align: left">apps/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">services&lt;/td>
 &lt;td style="text-align: left">svc&lt;/td>
 &lt;td style="text-align: left">Service&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">statefulsets&lt;/td>
 &lt;td style="text-align: left">sts&lt;/td>
 &lt;td style="text-align: left">StatefulSet&lt;/td>
 &lt;td style="text-align: left">apps/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">daemonsets&lt;/td>
 &lt;td style="text-align: left">ds&lt;/td>
 &lt;td style="text-align: left">DaemonSet&lt;/td>
 &lt;td style="text-align: left">apps/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">persistentvolumes&lt;/td>
 &lt;td style="text-align: left">pv&lt;/td>
 &lt;td style="text-align: left">PersistentVolume&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">persistentvolumeclaims&lt;/td>
 &lt;td style="text-align: left">pvc&lt;/td>
 &lt;td style="text-align: left">PersistentVolumeClaim&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">configmaps&lt;/td>
 &lt;td style="text-align: left">cm&lt;/td>
 &lt;td style="text-align: left">ConfigMap&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">namespaces&lt;/td>
 &lt;td style="text-align: left">ns&lt;/td>
 &lt;td style="text-align: left">Namespace&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">nodes&lt;/td>
 &lt;td style="text-align: left">no&lt;/td>
 &lt;td style="text-align: left">Node&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">secrets&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">Secret&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">jobs&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">Job&lt;/td>
 &lt;td style="text-align: left">batch/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">cronjobs&lt;/td>
 &lt;td style="text-align: left">cj&lt;/td>
 &lt;td style="text-align: left">CronJob&lt;/td>
 &lt;td style="text-align: left">batch/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">endpoints&lt;/td>
 &lt;td style="text-align: left">ep&lt;/td>
 &lt;td style="text-align: left">Endpoints&lt;/td>
 &lt;td style="text-align: left">v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">ingresses&lt;/td>
 &lt;td style="text-align: left">ing&lt;/td>
 &lt;td style="text-align: left">Ingress&lt;/td>
 &lt;td style="text-align: left">networking.k8s.io/v1&lt;/td>
 &lt;td style="text-align: left">true&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/blocky/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/blocky/</guid><description>&lt;h1 id="blocky">
 Blocky
 &lt;a class="anchor" href="#blocky">#&lt;/a>
&lt;/h1>
&lt;p>Blocky is a DNS proxy and ad-blocker.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>wget -q &lt;span style="color:#e6db74">&amp;#34;https://github.com/0xERR0R/blocky/releases/download/v0.21/blocky_v0.21_Linux_x86_64.tar.gz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xf blocky_v0.21_Linux_x86_64.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mv blocky /usr/local/bin/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo setcap cap_net_bind_service&lt;span style="color:#f92672">=&lt;/span>ep /usr/local/bin/blocky
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create user:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo groupadd --system blocky
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo useradd --system --gid blocky --create-home --home-dir /var/lib/blocky --shell /usr/sbin/nologin --comment &lt;span style="color:#e6db74">&amp;#34;Blocky DNS proxy&amp;#34;&lt;/span> blocky
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Configuration file &lt;code>/etc/blocky/config.yml&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">upstream&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">default&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">8.8.8.8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">1.1.1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">blocking&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">blackLists&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ads&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">https://raw.githubusercontent.com/dpurge/dns-hole/main/blacklist/dpurge.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">whiteLists&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ads&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">https://raw.githubusercontent.com/dpurge/dns-hole/main/whitelist/dpurge.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">clientGroupsBlock&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">default&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">ads&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">downloadTimeout&lt;/span>: &lt;span style="color:#ae81ff">4m&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">downloadAttempts&lt;/span>: &lt;span style="color:#ae81ff">5&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">downloadCooldown&lt;/span>: &lt;span style="color:#ae81ff">10s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">customDNS&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">mapping&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">example.home.arpa&lt;/span>: &lt;span style="color:#ae81ff">127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dns&lt;/span>: &lt;span style="color:#ae81ff">53&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">bootstrapDns&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">8.8.8.8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">1.1.1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">log&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">level&lt;/span>: &lt;span style="color:#ae81ff">warn&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Service file &lt;code>/etc/systemd/system/blocky.service&lt;/code>:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/caddy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/caddy/</guid><description>&lt;h1 id="caddy">
 Caddy
 &lt;a class="anchor" href="#caddy">#&lt;/a>
&lt;/h1>
&lt;h2 id="install-xcaddy">
 Install &lt;code>xcaddy&lt;/code>
 &lt;a class="anchor" href="#install-xcaddy">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>wget -q https://github.com/caddyserver/xcaddy/releases/download/v0.3.4/xcaddy_0.3.4_linux_amd64.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar xf xcaddy_0.3.4_linux_amd64.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mv xcaddy /usr/local/bin/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="build-caddy">
 Build &lt;code>caddy&lt;/code>
 &lt;a class="anchor" href="#build-caddy">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>xcaddy build &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --with github.com/wxh06/caddy-uwsgi-transport
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mv caddy /usr/local/bin/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo setcap cap_net_bind_service+eip /usr/local/bin/caddy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install-caddy">
 Install &lt;code>caddy&lt;/code>
 &lt;a class="anchor" href="#install-caddy">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo groupadd --system caddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo useradd --system --gid caddy --create-home --home-dir /var/lib/caddy --shell /usr/sbin/nologin --comment &lt;span style="color:#e6db74">&amp;#34;Caddy web server&amp;#34;&lt;/span> caddy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Create files and directories:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo mkdir /etc/caddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo touch /etc/caddy/Caddyfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chown -R root:caddy /etc/caddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mkdir /etc/ssl/caddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chown -R root:caddy /etc/ssl/caddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chmod &lt;span style="color:#ae81ff">0770&lt;/span> /etc/ssl/caddy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mkdir -p /var/www/public_html
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chown caddy:caddy /var/www/public_html
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo touch /etc/systemd/system/caddy.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chmod &lt;span style="color:#ae81ff">644&lt;/span> /etc/systemd/system/caddy.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo touch /var/www/public_html/index.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Service file &lt;code>/etc/systemd/system/caddy.service&lt;/code>:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/podman/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/podman/</guid><description>&lt;h1 id="podman">
 Podman
 &lt;a class="anchor" href="#podman">#&lt;/a>
&lt;/h1>
&lt;ul>
&lt;li>container management tool&lt;/li>
&lt;li>does not require a daemon&lt;/li>
&lt;li>each container is run in its own process&lt;/li>
&lt;li>supports rootless containers&lt;/li>
&lt;li>created by RedHat&lt;/li>
&lt;li>is open source&lt;/li>
&lt;/ul>
&lt;h2 id="podman-vs-docker">
 Podman vs Docker
 &lt;a class="anchor" href="#podman-vs-docker">#&lt;/a>
&lt;/h2>
&lt;p>Differences:&lt;/p>
&lt;ul>
&lt;li>Podman has deamonless architecture and runs containers as processes.
Docker utilizes a client-server architecture, docker daemon runs as a background process.&lt;/li>
&lt;li>Podman supports rootless containers.
Docker generally requires administrative privileges to run containers.&lt;/li>
&lt;li>Podman is considered more secure because it does not require a deamon and can run containers as non-root.
Docker raises security concerns because of a daemon running with root privileges.&lt;/li>
&lt;li>Podman supports multiple image formats.
Docker uses docker image format.&lt;/li>
&lt;li>Podman leverages the host system networking directly.
Docker manages networking through its own implementation.&lt;/li>
&lt;/ul>
&lt;p>Similarities:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/screen/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/screen/</guid><description>&lt;h1 id="screen">
 Screen
 &lt;a class="anchor" href="#screen">#&lt;/a>
&lt;/h1>
&lt;h2 id="basics">
 Basics
 &lt;a class="anchor" href="#basics">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>Start &lt;code>screen&lt;/code> session and give it a name: &lt;code>screen -S ScreenTest&lt;/code>&lt;/li>
&lt;li>Detach from current session: &lt;code>Ctrl-A d&lt;/code>&lt;/li>
&lt;li>List sessions: &lt;code>screen -ls&lt;/code>&lt;/li>
&lt;li>Re-attach to an existing session: &lt;code>screen -r &amp;lt;PID&amp;gt;&lt;/code>&lt;/li>
&lt;li>Re-attach session, if necessary detach or create: &lt;code>screen -dRR ScreenTest&lt;/code>&lt;/li>
&lt;li>Force-exit screen: &lt;code>Ctrl-A Ctrl-\&lt;/code>&lt;/li>
&lt;li>Kill session: &lt;code>screen -S ScreenTest -X quit&lt;/code>&lt;/li>
&lt;li>Clean all dead screen sessions: &lt;code>screen -wipe&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/searxng/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/searxng/</guid><description>&lt;h1 id="searxng">
 SearXNG
 &lt;a class="anchor" href="#searxng">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo apt update -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt upgrade -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get install -y python3-dev python3-babel python3-venv uwsgi uwsgi-plugin-python3 git build-essential libxslt-dev zlib1g-dev libffi-dev libssl-dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install">
 Install
 &lt;a class="anchor" href="#install">#&lt;/a>
&lt;/h2>
&lt;p>Create user:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo groupadd --system searxng
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo useradd --system --gid searxng --create-home --home-dir /var/lib/searxng --shell /bin/bash --comment &lt;span style="color:#e6db74">&amp;#34;Privacy-respecting metasearch engine&amp;#34;&lt;/span> searxng
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo -u searxng -i
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>searxng&lt;span style="color:#f92672">)&lt;/span>$ git clone &lt;span style="color:#e6db74">&amp;#34;https://github.com/searxng/searxng&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;/var/lib/searxng/searxng-src&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">(&lt;/span>searxng&lt;span style="color:#f92672">)&lt;/span>$ python3 -m venv &lt;span style="color:#e6db74">&amp;#34;/var/lib/searxng/searxng-pyenv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Autoload virtual enviroment in &lt;code>/var/lib/searxng/.profile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Automatically load virtual environment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> -f &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$HOME&lt;span style="color:#e6db74">/searxng-pyenv/bin/activate&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span> ; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$HOME&lt;span style="color:#e6db74">/searxng-pyenv/bin/activate&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Exit and start in a new session.
Make sure that pyenv was activated automatically:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/setup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/setup/</guid><description>&lt;h1 id="setup">
 Setup
 &lt;a class="anchor" href="#setup">#&lt;/a>
&lt;/h1>
&lt;h2 id="boot-in-text-mode">
 Boot in text mode
 &lt;a class="anchor" href="#boot-in-text-mode">#&lt;/a>
&lt;/h2>
&lt;p>Change the &lt;code>grub&lt;/code> configuration file (&lt;code>/etc/default/grub&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># GRUB_CMDLINE_LINUX_DEFAULT=&amp;#34;quiet splash&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">GRUB_CMDLINE_LINUX&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;text&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">GRUB_TERMINAL&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">console&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo update-grub
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl set-default multi-user.target
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>shutdown -r now
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ssh">
 SSH
 &lt;a class="anchor" href="#ssh">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install openssh-server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl status ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw allow ssh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check network configuration:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo apt install net-tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ifconfig
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="docker">
 Docker
 &lt;a class="anchor" href="#docker">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo apt install docker.io -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install docker-compose -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="git">
 Git
 &lt;a class="anchor" href="#git">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/linux/ubuntu/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/linux/ubuntu/</guid><description>&lt;h1 id="ubuntu">
 Ubuntu
 &lt;a class="anchor" href="#ubuntu">#&lt;/a>
&lt;/h1>
&lt;p>Get network configuration:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>ip a s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ifconfig -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Static IP in &lt;code>/etc/netplan/10-hostname.yaml&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">network&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ethernets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">eth0&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp4&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp6&lt;/span>: &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">dhcp-identifier&lt;/span>: &lt;span style="color:#ae81ff">mac&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">192.168.0.11&lt;/span>&lt;span style="color:#ae81ff">/24&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">routes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">to&lt;/span>: &lt;span style="color:#ae81ff">default&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">via&lt;/span>: &lt;span style="color:#ae81ff">192.168.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">nameservers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">addresses&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">192.168.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check disk size:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>lsblk --scsi
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo fdisk -l /dev/sda
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo parted -l
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>df -h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check memory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>free
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Resize logical volume to all disk:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>vgdisplay
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lvdisplay
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="generalize-cloud-image">
 Generalize cloud image
 &lt;a class="anchor" href="#generalize-cloud-image">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo cloud-init clean
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm -rf /var/lib/cloud/instances
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo truncate -s &lt;span style="color:#ae81ff">0&lt;/span> /etc/machine-id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm /var/lib/dbus/machine-id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ln -s /etc/machine-id /var/lib/dbus/machine-id
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo poweroff
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="lxc-server-setup">
 LXC server setup
 &lt;a class="anchor" href="#lxc-server-setup">#&lt;/a>
&lt;/h2>
&lt;p>Add user and install basic software:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/macos/homebrew/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/macos/homebrew/</guid><description>&lt;h1 id="homebrew">
 Homebrew
 &lt;a class="anchor" href="#homebrew">#&lt;/a>
&lt;/h1>
&lt;h2 id="install">
 Install
 &lt;a class="anchor" href="#install">#&lt;/a>
&lt;/h2>
&lt;p>Download package from &lt;code>https://github.com/Homebrew/brew/releases/&lt;/code>.&lt;/p>
&lt;p>It installs in &lt;code>/opt/homebrew&lt;/code>.&lt;/p>
&lt;h2 id="configuration">
 Configuration
 &lt;a class="anchor" href="#configuration">#&lt;/a>
&lt;/h2>
&lt;p>Add line to &lt;code>~/.zprofile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>eval &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>/opt/homebrew/bin/brew shellenv&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="usage">
 Usage
 &lt;a class="anchor" href="#usage">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew help
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew analytics off
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew doctor
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew shellenv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew cleanup
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew search xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew info xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew reinstall xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew uninstall xxx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew bundle dump
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew bundle install --file ./Brewfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="hashicorp-tools">
 Hashicorp tools
 &lt;a class="anchor" href="#hashicorp-tools">#&lt;/a>
&lt;/h2>
&lt;p>Install:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew tap hashicorp/tap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install hashicorp/tap/terraform
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Upgrade:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/macos/java/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/macos/java/</guid><description>&lt;h1 id="java-on-macos">
 Java on MacOS
 &lt;a class="anchor" href="#java-on-macos">#&lt;/a>
&lt;/h1>
&lt;p>Install with homebrew:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew search java
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew info java
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install java
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>ls -lsah /Library/Java/JavaVirtualMachines/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>java -version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/usr/libexec/java_home -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Setup &lt;code>JAVA_HOME&lt;/code> in &lt;code>~/.zshenv&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export JAVA_HOME&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>/usr/libexec/java_home -v&lt;span style="color:#e6db74">&amp;#34;21.0.1&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Refresh shell: &lt;code>source ~/.zshenv&lt;/code>&lt;/p>
&lt;p>Install Maven:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew install maven
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mvn -version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew list maven
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Settings are in &lt;code>/opt/homebrew/opt/maven/libexec/conf/settings.xml&lt;/code>.&lt;/p>
&lt;p>To upgrade or uninstall:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew upgrade maven
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew uninstall maven
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install Java 8:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew search openjdk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install openjdk@8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Cannot install - it requires x86_64 architecture&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/macos/multipass/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/macos/multipass/</guid><description>&lt;h1 id="multipass">
 Multipass
 &lt;a class="anchor" href="#multipass">#&lt;/a>
&lt;/h1>
&lt;p>Install with package from &lt;code>https://multipass.run/install&lt;/code>.&lt;/p>
&lt;p>The command is installed in &lt;code>/usr/local/bin/multipass&lt;/code>.&lt;/p>
&lt;p>Logs are in &lt;code>/Library/Logs/Multipass/multipassd.log&lt;/code>.&lt;/p>
&lt;p>Or use &lt;code>brew&lt;/code> to install:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew install --cask multipass
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Usage:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>multipass networks
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass set local.bridged-network&lt;span style="color:#f92672">=&lt;/span>en0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass launch docker --name jdp --cpus &lt;span style="color:#ae81ff">2&lt;/span> --memory 6G --disk 50G --bridged
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass info jdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass shell jdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass start jdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass restart jdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass stop jdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass delete jdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass launch docker --cpus &lt;span style="color:#ae81ff">2&lt;/span> --memory 6G --disk 50G
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass info --all
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multipass purge
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="config">
 Config
 &lt;a class="anchor" href="#config">#&lt;/a>
&lt;/h2>
&lt;p>Add to &lt;code>~/.zprofile&lt;/code>:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/macos/python/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/macos/python/</guid><description>&lt;h1 id="python-on-macos">
 Python on MacOS
 &lt;a class="anchor" href="#python-on-macos">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install pyenv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install pyenv-virtualenv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add to &lt;code>~/.zshenv&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>eval &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>pyenv init -&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>eval &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>pyenv virtualenv-init -&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Check:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>pyenv root
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install python:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>pyenv install -l
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pyenv install 3.12.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pyenv global 3.12.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pyenv version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Prepare virtual environment for LLM:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>pyenv virtualenv 3.12.0 llm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pyenv global llm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pip install langchain
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install packages:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>pip install --upgrade pip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pip install awscli
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/packer/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/packer/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-packer-setup" id="tabs-packer-setup-0" checked="checked" />
 &lt;label for="tabs-packer-setup-0">Windows&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;p>$pkr_version = &amp;ldquo;1.9.4&amp;rdquo;
$pkr_archive = &amp;ldquo;
 &lt;a href="https://releases.hashicorp.com/packer/$%7bpkr_version%7d/packer_$%7bpkr_version%7d_windows_amd64.zip%22">https://releases.hashicorp.com/packer/${pkr_version}/packer_${pkr_version}_windows_amd64.zip"&lt;/a>
Invoke-WebRequest -Uri $pkr_archive -OutFile &amp;ldquo;${pwd}/packer_${pkr_version}_windows_amd64.zip&amp;rdquo;&lt;/p>
&lt;p>Add-Type -Assembly System.IO.Compression.FileSystem
$zip = [IO.Compression.ZipFile]::OpenRead(&amp;quot;${pwd}/packer_${pkr_version}&lt;em>windows_amd64.zip&amp;rdquo;)
$Executables = $zip.Entries | Where-Object {$&lt;/em>.Name -like &amp;lsquo;*.exe&amp;rsquo;}
foreach ($Executable in $Executables) {
[System.IO.Compression.ZipFileExtensions]::ExtractToFile($Executable, &amp;ldquo;${pwd}/$($Executable.Name)&amp;rdquo;, $True)
}
$zip.Dispose()
Remove-Item -Path &amp;ldquo;${pwd}/packer_${pkr_version}_windows_amd64.zip&amp;rdquo;&lt;/p>
&lt;/div>&lt;input type="radio" class="toggle" name="tabs-packer-setup" id="tabs-packer-setup-1" />
 &lt;label for="tabs-packer-setup-1">Linux&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export PACKER_VERSION&lt;span style="color:#f92672">=&lt;/span>1.7.10
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -sSL https://releases.hashicorp.com/packer/&lt;span style="color:#e6db74">${&lt;/span>PACKER_VERSION&lt;span style="color:#e6db74">}&lt;/span>/packer_&lt;span style="color:#e6db74">${&lt;/span>PACKER_VERSION&lt;span style="color:#e6db74">}&lt;/span>_linux_amd64.zip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -o /tmp/packer_linux_amd64.zip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /usr/local/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unzip /tmp/packer_linux_amd64.zip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm /tmp/packer_linux_amd64.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;/div>

&lt;p>Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>packer validate src/build-agent-ubuntu.pkr.hcl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>packer build src/build-agent-ubuntu.pkr.hcl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/terraform/aws/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/terraform/aws/</guid><description>&lt;h1 id="aws-samples">
 AWS samples
 &lt;a class="anchor" href="#aws-samples">#&lt;/a>
&lt;/h1>
&lt;h2 id="web-server-with-load-balancing-and-auto-scaling">
 Web server with load balancing and auto-scaling
 &lt;a class="anchor" href="#web-server-with-load-balancing-and-auto-scaling">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-tf" data-lang="tf">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">provider&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">region&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;us-east-2&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">variable&lt;/span> &lt;span style="color:#e6db74">&amp;#34;server_port&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">description&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;The port on which the HTTP server will run&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">default&lt;/span> = &lt;span style="color:#ae81ff">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">type&lt;/span> = &lt;span style="color:#a6e22e">number&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">validation&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">condition&lt;/span> = var.&lt;span style="color:#a6e22e">server_port&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> var.&lt;span style="color:#a6e22e">server_port&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">65536&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">error_message&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;Port must be between 1 and 65535&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sensitive&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">data&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_vpc&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">default&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">data&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_subnets&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">filter&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;vpc-id&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">values&lt;/span> = [data.&lt;span style="color:#a6e22e">aws_vpc&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">id&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_security_group&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;allow-web&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ingress&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">from_port&lt;/span> = var.&lt;span style="color:#a6e22e">server_port&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">to_port&lt;/span> = var.&lt;span style="color:#a6e22e">server_port&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">protocol&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cidr_blocks&lt;/span> = [&lt;span style="color:#e6db74">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_security_group&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;alb&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;web-alb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">ingress&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">from_port&lt;/span> = &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">to_port&lt;/span> = &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">protocol&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;tcp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cidr_blocks&lt;/span> = [&lt;span style="color:#e6db74">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">egress&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">from_port&lt;/span> = &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">to_port&lt;/span> = &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">protocol&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;-1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">cidr_blocks&lt;/span> = [&lt;span style="color:#e6db74">&amp;#34;0.0.0.0/0&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_launch_configuration&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">image_id&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;ami-0c94855ba95c574c8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">instance_type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;t3.micro&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">security_groups&lt;/span> = [&lt;span style="color:#a6e22e">aws_security_group&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">id&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">user_data&lt;/span> = &lt;span style="color:#f92672">&amp;lt;&amp;lt;-EOF&lt;/span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> #!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> echo &amp;#34;Hello, World!&amp;#34; &amp;gt; index.html
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> nohup busybox httpd -f -p ${var.server_port} &amp;amp;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> &lt;/span>&lt;span style="color:#f92672">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">lifecycle&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">create_before_destroy&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_autoscaling_group&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">launch_configuration&lt;/span> = &lt;span style="color:#a6e22e">aws_launch_configuration&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">vpc_zone_identifier&lt;/span> = data.&lt;span style="color:#a6e22e">aws_subnets&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">ids&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">target_group_arns&lt;/span> = [&lt;span style="color:#a6e22e">aws_lb_target_group&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">arn&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">health_check_type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;ELB&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">min_size&lt;/span> = &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">max_size&lt;/span> = &lt;span style="color:#ae81ff">4&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">tag&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">key&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;Name&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">value&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;web&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">propagate_at_launch&lt;/span> = &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_lb&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;web&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">load_balancer_type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;application&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">subnets&lt;/span> = data.&lt;span style="color:#a6e22e">aws_subnets&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">ids&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">security_groups&lt;/span> = [&lt;span style="color:#a6e22e">aws_security_group&lt;/span>.&lt;span style="color:#a6e22e">alb&lt;/span>.&lt;span style="color:#a6e22e">id&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_lb_listener&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;http&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">load_balancer_arn&lt;/span> = &lt;span style="color:#a6e22e">aws_lb&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">arn&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">port&lt;/span> = &lt;span style="color:#ae81ff">80&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">protocol&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;HTTP&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">default_action&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;fixed-response&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fixed_response&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">content_type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;text/plain&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">message_body&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;404: page not found&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">status_code&lt;/span> = &lt;span style="color:#ae81ff">404&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_lb_target_group&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;web-example&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">port&lt;/span> = var.&lt;span style="color:#a6e22e">server_port&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">protocol&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;HTTP&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">vpc_id&lt;/span> = data.&lt;span style="color:#a6e22e">aws_vpc&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">id&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">health_check&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">path&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">protocol&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;HTTP&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">matcher&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;200&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">interval&lt;/span> = &lt;span style="color:#ae81ff">15&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timeout&lt;/span> = &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">healthy_threshold&lt;/span> = &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">unhealthy_threshold&lt;/span> = &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">resource&lt;/span> &lt;span style="color:#e6db74">&amp;#34;aws_lb_listener_rule&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;this&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">listener_arn&lt;/span> = &lt;span style="color:#a6e22e">aws_lb_listener&lt;/span>.&lt;span style="color:#a6e22e">http&lt;/span>.&lt;span style="color:#a6e22e">arn&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">priority&lt;/span> = &lt;span style="color:#ae81ff">100&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">condition&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">path_pattern&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">values&lt;/span> = [&lt;span style="color:#e6db74">&amp;#34;*&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">action&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">type&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;forward&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">target_group_arn&lt;/span> = &lt;span style="color:#a6e22e">aws_lb_target_group&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">arn&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">output&lt;/span> &lt;span style="color:#e6db74">&amp;#34;alb_dns_name&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">description&lt;/span> = &lt;span style="color:#e6db74">&amp;#34;DNS name of the application load balancer&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">value&lt;/span> = &lt;span style="color:#a6e22e">aws_lb&lt;/span>.&lt;span style="color:#a6e22e">this&lt;/span>.&lt;span style="color:#a6e22e">dns_name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">sensitive&lt;/span> = &lt;span style="color:#66d9ef">false&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>set -o xtrace
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform apply --auto-approve
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ALB&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>terraform output alb_dns_name | tr -d &lt;span style="color:#e6db74">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl http://&lt;span style="color:#e6db74">${&lt;/span>ALB&lt;span style="color:#e6db74">}&lt;/span>/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/terraform/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/terraform/basics/</guid><description>&lt;h1 id="basic-commands">
 Basic commands
 &lt;a class="anchor" href="#basic-commands">#&lt;/a>
&lt;/h1>
&lt;h2 id="resource-management">
 Resource management
 &lt;a class="anchor" href="#resource-management">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>terraform init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform plan
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform apply
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform destroy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform graph
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform output
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="work-with-code">
 Work with code
 &lt;a class="anchor" href="#work-with-code">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>terraform validate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform fmt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="work-with-state">
 Work with state
 &lt;a class="anchor" href="#work-with-state">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>terraform state list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform state mv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform state show
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terraform state rm &lt;span style="color:#ae81ff">\&amp;lt;&lt;/span>type&lt;span style="color:#ae81ff">\&amp;gt;&lt;/span>.&lt;span style="color:#ae81ff">\&amp;lt;&lt;/span>resource&lt;span style="color:#ae81ff">\&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Examples:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#66d9ef">System.Text.Encoding&lt;/span>]::UTF8.GetString([&lt;span style="color:#66d9ef">System.Convert&lt;/span>]::FromBase64String((kubectl get secret api-secret -o jsonpath=&lt;span style="color:#e6db74">&amp;#39;{.data.db-connectionstring}&amp;#39;&lt;/span>)))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terragrunt plan -var&lt;span style="color:#f92672">-file&lt;/span> secrets.tfvars --terragrunt-log-level debug
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>az ad group show --group xxx-Contributors --query id --output tsv
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/terraform/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/terraform/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-tf-setup" id="tabs-tf-setup-0" checked="checked" />
 &lt;label for="tabs-tf-setup-0">Linux&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;p>Install &lt;code>tfswitch&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export TFSWITCH_VERSION&lt;span style="color:#f92672">=&lt;/span>0.13.1300
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -sSL https://github.com/warrensbox/terraform-switcher/releases/download/&lt;span style="color:#e6db74">${&lt;/span>TFSWITCH_VERSION&lt;span style="color:#e6db74">}&lt;/span>/terraform-switcher_&lt;span style="color:#e6db74">${&lt;/span>TFSWITCH_VERSION&lt;span style="color:#e6db74">}&lt;/span>_linux_amd64.tar.gz &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -o /tmp/tfswitch_linux_amd64.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar --directory&lt;span style="color:#f92672">=&lt;/span>/usr/local/bin -xf /tmp/tfswitch_linux_amd64.tar.gz tfswitch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm /tmp/tfswitch_linux_amd64.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install &lt;code>terraform&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>tfswitch 1.3.7
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install &lt;code>tflint&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export TFLINT_VERSION&lt;span style="color:#f92672">=&lt;/span>0.38.1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -sSL https://github.com/terraform-linters/tflint/releases/download/v&lt;span style="color:#e6db74">${&lt;/span>TFLINT_VERSION&lt;span style="color:#e6db74">}&lt;/span>/tflint_linux_amd64.zip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> -o /tmp/tflint_linux_amd64.zip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /usr/local/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>unzip /tmp/tflint_linux_amd64.zip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm /tmp/tflint_linux_amd64.zip
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;input type="radio" class="toggle" name="tabs-tf-setup" id="tabs-tf-setup-1" />
 &lt;label for="tabs-tf-setup-1">MacOS&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>brew tap hashicorp/tap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>brew install hashicorp/tap/terraform
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;input type="radio" class="toggle" name="tabs-tf-setup" id="tabs-tf-setup-2" />
 &lt;label for="tabs-tf-setup-2">Windows&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$tf_version = &lt;span style="color:#e6db74">&amp;#34;1.6.4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$tf_archive = &lt;span style="color:#e6db74">&amp;#34;https://releases.hashicorp.com/terraform/&lt;/span>${tf_version}&lt;span style="color:#e6db74">/terraform_&lt;/span>${tf_version}&lt;span style="color:#e6db74">_windows_amd64.zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Invoke-WebRequest -Uri $tf_archive -OutFile &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/terraform_&lt;/span>${tf_version}&lt;span style="color:#e6db74">_windows_amd64.zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Add-Type -Assembly System.IO.Compression.FileSystem
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$zip = [&lt;span style="color:#66d9ef">IO.Compression.ZipFile&lt;/span>]::OpenRead(&lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/terraform_&lt;/span>${tf_version}&lt;span style="color:#e6db74">_windows_amd64.zip&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$Executables = $zip.Entries | Where-Object {$_.Name &lt;span style="color:#f92672">-like&lt;/span> &lt;span style="color:#e6db74">&amp;#39;*.exe&amp;#39;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($Executable &lt;span style="color:#66d9ef">in&lt;/span> $Executables) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">System.IO.Compression.ZipFileExtensions&lt;/span>]::ExtractToFile($Executable, &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/&lt;/span>$($Executable.Name)&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, $True)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$zip.Dispose()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Remove-Item -Path &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">/terraform_&lt;/span>${tf_version}&lt;span style="color:#e6db74">_windows_amd64.zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/terragrunt/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/terragrunt/basics/</guid><description>&lt;h1 id="basic-commands">
 Basic commands
 &lt;a class="anchor" href="#basic-commands">#&lt;/a>
&lt;/h1>
&lt;h2 id="work-with-state">
 Work with state
 &lt;a class="anchor" href="#work-with-state">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>terragrunt state pull &amp;gt; backup.tfstate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>terragrunt state push backup.tfstate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/vagrant/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/vagrant/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>
&lt;h1 id="windows">
 Windows
 &lt;a class="anchor" href="#windows">#&lt;/a>
&lt;/h1>
&lt;ul>
&lt;li>Install Hyper-V&lt;/li>
&lt;li>Check Samba configuration&lt;/li>
&lt;li>Configure Hyper-V as default Vagrant provider&lt;/li>
&lt;li>Install Vagrant&amp;rsquo;s &lt;code>reload&lt;/code> plugin&lt;/li>
&lt;li>Create NAT switch for Hyper-V&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>Get-SmbServerConfiguration
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#66d9ef">Environment&lt;/span>]::SetEnvironmentVariable(&lt;span style="color:#e6db74">&amp;#34;VAGRANT_DEFAULT_PROVIDER&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;hyperv&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;User&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vagrant plugin install vagrant-reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Get-NetAdapter | Format-Table -AutoSize&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get-VMSwitch | Select-Object -ExpandProperty Name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># if NatSwitch not listed&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>New-VMSwitch -SwitchName &lt;span style="color:#e6db74">&amp;#34;NATSwitch&amp;#34;&lt;/span> -SwitchType Internal
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get-NetIPAddress | Select-Object -ExpandProperty IPAddress
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># if 192.168.200.1 not listed&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>New-NetIPAddress -IPAddress &lt;span style="color:#ae81ff">192.168&lt;/span>.200.1 -PrefixLength &lt;span style="color:#ae81ff">24&lt;/span> -InterfaceAlias &lt;span style="color:#e6db74">&amp;#34;vEthernet (NATSwitch)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Get-NetNAT | Select-Object -ExpandProperty InternalIPInterfaceAddressPrefix
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># if 192.168.200.0/24 not listed&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>New-NetNAT -Name &lt;span style="color:#e6db74">&amp;#34;NATNetwork&amp;#34;&lt;/span> -InternalIPInterfaceAddressPrefix &lt;span style="color:#ae81ff">192.168&lt;/span>.200.&lt;span style="color:#ae81ff">0&lt;/span>/&lt;span style="color:#ae81ff">24&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vagrantfile">
 Vagrantfile
 &lt;a class="anchor" href="#vagrantfile">#&lt;/a>
&lt;/h2>
&lt;p>This template is ready to create several VMs on Hyper-V
and set static address to all of them.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/windows/ime/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/windows/ime/</guid><description>&lt;h1 id="input-methods">
 Input methods
 &lt;a class="anchor" href="#input-methods">#&lt;/a>
&lt;/h1>
&lt;h2 id="xiaohe-shuangpin-">
 Xiaohe shuangpin 
 &lt;a class="anchor" href="#xiaohe-shuangpin-%e5%b0%8f%e9%b9%a4%e5%8f%8c%e6%8b%bc">#&lt;/a>
&lt;/h2>
&lt;pre tabindex="0">&lt;code>Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\Microsoft\InputMethod\Settings\CHS]
&amp;#34;Enable Double Pinyin&amp;#34;=dword:00000001
&amp;#34;DoublePinyinScheme&amp;#34;=dword:0000000a
&amp;#34;UserDefinedDoublePinyinScheme0&amp;#34;=&amp;#34;*2*^*iuvdjhcwfg^xmlnpbksqszxkrltvyovt&amp;#34;
&lt;/code>&lt;/pre></description></item><item><title/><link>https://dpurge.github.io/docs/devops/windows/winget/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/windows/winget/</guid><description>&lt;h1 id="winget">
 Winget
 &lt;a class="anchor" href="#winget">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>winget.exe install --id Microsoft.Powershell --source winget
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="git">
 Git
 &lt;a class="anchor" href="#git">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>winget install --id Git.Git -e --source winget
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>After installation, copy SSH keys to &lt;code>~\.ssh&lt;/code>.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/wsl/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/wsl/installation/</guid><description>&lt;h1 id="installation-of-wsl">
 Installation of WSL
 &lt;a class="anchor" href="#installation-of-wsl">#&lt;/a>
&lt;/h1>
&lt;p>Basic commands:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>wsl --list --online
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wsl --list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wsl --install -d &amp;lt;distro&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wsl -d &amp;lt;distro&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wsl --terminate &amp;lt;distro&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="wsl2">
 WSL2
 &lt;a class="anchor" href="#wsl2">#&lt;/a>
&lt;/h2>
&lt;p>Enable Windows subsystem for Linux:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>Enable-WindowsOptionalFeature -Online -NoRestart -FeatureName Microsoft-Windows-Subsystem-Linux
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enable-WindowsOptionalFeature -Online -NoRestart -FeatureName VirtualMachinePlatform
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Enable version 2 of WSL:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>Invoke-WebRequest https&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>//wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi -OutFile c:\wsl_update_x64.msi -UseBasicParsing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Invoke-WebRequest https&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>//... -OutFile D:\dat\WSL\kernel\vmlinux -UseBasicParsing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>start D:\dat\WSL\wsl_update_x64.msi
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wsl --set-default-version &lt;span style="color:#ae81ff">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Configure non-default kernel in &lt;code>%USERPROFILE%\.wslconfig&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code>[wsl2]
kernel=D:\\dat\\WSL\\kernel\\vmlinux
&lt;/code>&lt;/pre>&lt;h2 id="import-ubuntu-image-from-docker">
 Import Ubuntu image from docker
 &lt;a class="anchor" href="#import-ubuntu-image-from-docker">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>Download image: &lt;code>Invoke-WebRequest https://raw.githubusercontent.com/tianon/docker-brew-ubuntu-core/fbca80af7960ffcca085d509c20f53ced1697ade/kinetic/ubuntu-kinetic-oci-amd64-root.tar.gz -OutFile C:\ubuntu-kinetic-oci-amd64-root.tar.gz -UseBasicParsing&lt;/code>&lt;/li>
&lt;li>Import image: &lt;code>wsl --import jdp-ubuntu C:\dat\WSL\jdp-ubuntu C:\ubuntu-kinetic-oci-amd64-root.tar.gz&lt;/code>&lt;/li>
&lt;li>Update system: &lt;code>apt-get update&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="import-arch-image-from-docker">
 Import Arch image from docker
 &lt;a class="anchor" href="#import-arch-image-from-docker">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>Download image: &lt;code>Invoke-WebRequest https://gitlab.archlinux.org/archlinux/archlinux-docker/-/package_files/2816/download -OutFile C:\arch-base-20220704.0.66039.tar.zst -UseBasicParsing&lt;/code>&lt;/li>
&lt;li>Import image: &lt;code>wsl --import jdp-arch C:\dat\WSL\jdp-arch C:\arch-base-20220704.0.66039.tar&lt;/code>&lt;/li>
&lt;li>Uncomment locale file: &lt;code>/etc/locale.gen&lt;/code>&lt;/li>
&lt;li>Generate locale: &lt;code>locale-gen&lt;/code>&lt;/li>
&lt;li>Initialize key: &lt;code>pacman-key --init&lt;/code>&lt;/li>
&lt;li>Update system: &lt;code>pacman -Syu&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="mount-host-directory">
 Mount host directory
 &lt;a class="anchor" href="#mount-host-directory">#&lt;/a>
&lt;/h2>
&lt;p>Create directory in WSL: &lt;code>mkdir /src&lt;/code>&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/devops/wsl/ubuntu2004/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/wsl/ubuntu2004/</guid><description>&lt;h1 id="ubuntu-2004">
 Ubuntu 20.04
 &lt;a class="anchor" href="#ubuntu-2004">#&lt;/a>
&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>Invoke-WebRequest -Uri https&lt;span style="color:#960050;background-color:#1e0010">:&lt;/span>//aka.ms/wslubuntu2004 -OutFile c:\ubuntu2004.appx -UseBasicParsing 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Add-AppxPackage c:\ubuntu2004.appx
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># DISM.EXE /Online /Add-ProvisionedAppxPackage /PackagePath:c:\\ubuntu2004.appx /SkipLicense --AllUsers&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Start Ubuntu 20.04 console to install the base system, and then run:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="docker-in-ubuntu-2004">
 Docker in Ubuntu 20.04
 &lt;a class="anchor" href="#docker-in-ubuntu-2004">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install --no-install-recommends apt-transport-https ca-certificates curl gnupg2 net-tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source /etc/os-release
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -fsSL https://download.docker.com/linux/&lt;span style="color:#e6db74">${&lt;/span>ID&lt;span style="color:#e6db74">}&lt;/span>/gpg | sudo apt-key add -
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;deb [arch=amd64] https://download.docker.com/linux/&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>ID&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> &lt;/span>&lt;span style="color:#e6db74">${&lt;/span>VERSION_CODENAME&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> stable&amp;#34;&lt;/span> | sudo tee /etc/apt/sources.list.d/docker.list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install docker-ce docker-ce-cli containerd.io docker-compose
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/devops/wsl/ubuntu2204/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/devops/wsl/ubuntu2204/</guid><description>&lt;h1 id="ubuntu-2204">
 Ubuntu 22.04
 &lt;a class="anchor" href="#ubuntu-2204">#&lt;/a>
&lt;/h1>
&lt;p>Update the system:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt -y upgrade
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="rdp-connections">
 RDP connections
 &lt;a class="anchor" href="#rdp-connections">#&lt;/a>
&lt;/h2>
&lt;p>Install xrdp and xwindows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install -y xrdp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install -y xfce4 xfce4-goodies
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo sed -i &lt;span style="color:#e6db74">&amp;#39;s/3389/3390/g&amp;#39;&lt;/span> /etc/xrdp/xrdp.ini
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo sed -i &lt;span style="color:#e6db74">&amp;#39;s/max_bpp=32/max_bpp=128/g&amp;#39;&lt;/span> /etc/xrdp/xrdp.ini
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo sed -i &lt;span style="color:#e6db74">&amp;#39;s/xserverbpp=24/xserverbpp=128/g&amp;#39;&lt;/span> /etc/xrdp/xrdp.ini
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo xfce4-session &amp;gt; ~/.xsession
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Comment out and add line in &lt;code>/etc/xrdp/startwm.sh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># test -x /etc/X11/Xsession &amp;amp;&amp;amp; exec /etc/X11/Xsession&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># exec /bin/sh /etc/X11/Xsession&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>startxfce4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Start XRDP:&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/other/books/snippets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/other/books/snippets/</guid><description>&lt;h1 id="snippets">
 Snippets
 &lt;a class="anchor" href="#snippets">#&lt;/a>
&lt;/h1>
&lt;h2 id="export-pdf-to-png">
 Export PDF to PNG
 &lt;a class="anchor" href="#export-pdf-to-png">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>Import-Module -Name D:\src\github.com\dpurge\jdp-psmodule\src\JdpBookbind
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Invoke-Book2Image -OutputDirectory img -InputFile book.pdf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="merge-two-directories-with-images">
 Merge two directories with images
 &lt;a class="anchor" href="#merge-two-directories-with-images">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$a = Get-ChildItem -Filter *.png ./img1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$b = Get-ChildItem -Filter *.png ./img2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$imgs = $a + $b
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$i = &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($img &lt;span style="color:#66d9ef">in&lt;/span> $imgs) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $f = &lt;span style="color:#e6db74">&amp;#34;./img/page-{0:d3}.png&amp;#34;&lt;/span> &lt;span style="color:#f92672">-f&lt;/span> $i
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$img&lt;span style="color:#e6db74"> -&amp;gt; &lt;/span>$f&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Move-Item -Path $img -Destination $f
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $i++
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="render-pdf-pages">
 Render PDF pages
 &lt;a class="anchor" href="#render-pdf-pages">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">.350&lt;/span> | %{D:\pgm\ImageMagick\convert.exe -density &lt;span style="color:#ae81ff">300&lt;/span> book.pdf[$_] -quality &lt;span style="color:#ae81ff">100&lt;/span> (&lt;span style="color:#e6db74">&amp;#34;./img/page-{0:d3}.tif&amp;#34;&lt;/span> &lt;span style="color:#f92672">-f&lt;/span> $_)}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">.350&lt;/span> | %{D:\pgm\ImageMagick\convert.exe -density &lt;span style="color:#ae81ff">300&lt;/span> book.pdf[$_] -quality &lt;span style="color:#ae81ff">100&lt;/span> -type Grayscale -filter Lanczos (&lt;span style="color:#e6db74">&amp;#34;./img/page-{0:d3}.png&amp;#34;&lt;/span> &lt;span style="color:#f92672">-f&lt;/span> $_)}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="convert-to-grayscale">
 Convert to grayscale
 &lt;a class="anchor" href="#convert-to-grayscale">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$files = Get-ChildItem -Filter *.png
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span>($file &lt;span style="color:#66d9ef">in&lt;/span> $files) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $outfile = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${pwd}&lt;span style="color:#e6db74">\out\&lt;/span>$($file.Name)&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$file&lt;span style="color:#e6db74"> -&amp;gt; &lt;/span>$outfile&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># D:\pgm\ImageMagick\convert.exe -grayscale Rec709Luminance $file $outfile&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D:\pgm\ImageMagick\convert.exe -negate $file $outfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># D:\pgm\ImageMagick\convert.exe $file -depth 4 -colorspace gray -define png:color-type=0 -define png:bit-depth=4 $outfile&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="convert-flac-to-mp3">
 Convert FLAC to MP3
 &lt;a class="anchor" href="#convert-flac-to-mp3">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$files = Get-ChildItem -Filter *.flac
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span>($file &lt;span style="color:#66d9ef">in&lt;/span> $files) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $outfile = ($file.Fullname &lt;span style="color:#f92672">-replace&lt;/span> &lt;span style="color:#e6db74">&amp;#39;.flac$&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;.mp3&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$file&lt;span style="color:#e6db74"> -&amp;gt; &lt;/span>$outfile&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D:\pgm\ffmpeg\bin\ffmpeg.exe -i $file -ab 320k -map_metadata &lt;span style="color:#ae81ff">0&lt;/span> -id3v2_version &lt;span style="color:#ae81ff">3&lt;/span> $outfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="convert-wma-to-mp3">
 Convert WMA to MP3
 &lt;a class="anchor" href="#convert-wma-to-mp3">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$files = Get-ChildItem -Filter *.wma
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span>($file &lt;span style="color:#66d9ef">in&lt;/span> $files) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $outfile = ($file.Fullname &lt;span style="color:#f92672">-replace&lt;/span> &lt;span style="color:#e6db74">&amp;#39;.wma$&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;.mp3&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$file&lt;span style="color:#e6db74"> -&amp;gt; &lt;/span>$outfile&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D:\pgm\ffmpeg\bin\ffmpeg.exe -i $file -ab 192k $outfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="convert-webm-to-mp3">
 Convert WEBM to MP3
 &lt;a class="anchor" href="#convert-webm-to-mp3">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>D:\pgm\ffmpeg\bin\ffmpeg.exe -i nagranie.webm -vn -ab 128k -ar &lt;span style="color:#ae81ff">44100&lt;/span> -y nagranie.mp3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="download-from-youtube">
 Download from YouTube
 &lt;a class="anchor" href="#download-from-youtube">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>youtube-dl -x --audio-format mp3 &amp;lt;Video-URL&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>youtube-dl &lt;span style="color:#f92672">-f&lt;/span> bestaudio[ext=m4a] --embed-thumbnail --add-metadata &amp;lt;Video-URL&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="convert-png-to-svg">
 Convert PNG to SVG
 &lt;a class="anchor" href="#convert-png-to-svg">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$files = Get-ChildItem -Filter *.png
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span>($pngfile &lt;span style="color:#66d9ef">in&lt;/span> $files) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $bmpfile = ($pngfile.Fullname &lt;span style="color:#f92672">-replace&lt;/span> &lt;span style="color:#e6db74">&amp;#39;([^.]).png&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;.bmp&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $svgfile = ($pngfile.Fullname &lt;span style="color:#f92672">-replace&lt;/span> &lt;span style="color:#e6db74">&amp;#39;([^.]).png&amp;#39;&lt;/span>,&lt;span style="color:#e6db74">&amp;#39;.svg&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$pngfile&lt;span style="color:#e6db74"> -&amp;gt; &lt;/span>$bmpfile&lt;span style="color:#e6db74"> -&amp;gt; &lt;/span>$svgfile&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D:\pgm\ImageMagick\convert.exe $pngfile $bmpfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> potrace.exe -s -a0 $bmpfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="print-scanned-book-for-binding">
 Print scanned book for binding
 &lt;a class="anchor" href="#print-scanned-book-for-binding">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$sheets = &lt;span style="color:#ae81ff">8&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$pages = &lt;span style="color:#ae81ff">4&lt;/span> * $sheets
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$files = Get-ChildItem -Filter *.png
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$blank = $files[&lt;span style="color:#ae81ff">0&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$batches=&lt;span style="color:#66d9ef">for&lt;/span>($i=&lt;span style="color:#ae81ff">0&lt;/span>; $i &lt;span style="color:#f92672">-lt&lt;/span> $files.length; $i+=$pages){ ,($files[$i..($i + $pages - &lt;span style="color:#ae81ff">1&lt;/span>)])}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($i &lt;span style="color:#66d9ef">in&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>..($pages - $batches[&lt;span style="color:#ae81ff">-1&lt;/span>].length)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $batches[&lt;span style="color:#ae81ff">-1&lt;/span>] += $blank
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$batchnr = &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span>($batch &lt;span style="color:#66d9ef">in&lt;/span> $batches) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $batchnr += &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $outfile = &lt;span style="color:#e6db74">&amp;#34;../batch-{0:d2}.pdf&amp;#34;&lt;/span> &lt;span style="color:#f92672">-f&lt;/span> $batchnr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $printBatch = @()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">foreach&lt;/span> ($i &lt;span style="color:#66d9ef">in&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>..($batch.length / &lt;span style="color:#ae81ff">4&lt;/span> - &lt;span style="color:#ae81ff">1&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $printBatch += $batch[($pages - &lt;span style="color:#ae81ff">1&lt;/span> - &lt;span style="color:#ae81ff">2&lt;/span> * $i)] &lt;span style="color:#75715e"># last page&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $printBatch += $batch[(&lt;span style="color:#ae81ff">2&lt;/span> * $i)] &lt;span style="color:#75715e"># first page&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $printBatch += $batch[(&lt;span style="color:#ae81ff">2&lt;/span> * $i + &lt;span style="color:#ae81ff">1&lt;/span>)] &lt;span style="color:#75715e"># second page&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $printBatch += $batch[($pages - &lt;span style="color:#ae81ff">1&lt;/span> - &lt;span style="color:#ae81ff">2&lt;/span> * $i - &lt;span style="color:#ae81ff">1&lt;/span>)] &lt;span style="color:#75715e"># last-but-one page&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host $outfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host $printBatch.basename
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> D:\pgm\ImageMagick\convert.exe $printBatch $outfile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/awk/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/awk/basics/</guid><description>&lt;h1 id="awk-basics">
 Awk basics
 &lt;a class="anchor" href="#awk-basics">#&lt;/a>
&lt;/h1></description></item><item><title/><link>https://dpurge.github.io/docs/programming/bash/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/bash/basics/</guid><description>&lt;h1 id="bash-basics">
 Bash basics
 &lt;a class="anchor" href="#bash-basics">#&lt;/a>
&lt;/h1>
&lt;h2 id="get-unix-timestamp">
 Get unix timestamp
 &lt;a class="anchor" href="#get-unix-timestamp">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>date +%s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/batch/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/batch/basics/</guid><description>&lt;h1 id="batch-basics">
 Batch basics
 &lt;a class="anchor" href="#batch-basics">#&lt;/a>
&lt;/h1>
&lt;h2 id="map-drive-to-directory">
 Map drive to directory
 &lt;a class="anchor" href="#map-drive-to-directory">#&lt;/a>
&lt;/h2>
&lt;p>Create mapping:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>subst G: C:\jdp\src\github.com\dpurge
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Remove mapping:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>subst G: /D
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/csharp/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/csharp/basics/</guid><description>&lt;h1 id="c-basics">
 C# Basics
 &lt;a class="anchor" href="#c-basics">#&lt;/a>
&lt;/h1></description></item><item><title/><link>https://dpurge.github.io/docs/programming/go/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/go/basics/</guid><description>&lt;h1 id="go-basics">
 Go Basics
 &lt;a class="anchor" href="#go-basics">#&lt;/a>
&lt;/h1>
&lt;h2 id="project-template">
 Project template
 &lt;a class="anchor" href="#project-template">#&lt;/a>
&lt;/h2>
&lt;p>Set up:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>mkdir example-project
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd ./example-project
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>go mod init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>./.gitignore&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-gitignore" data-lang="gitignore">&lt;/code>&lt;/pre>&lt;p>&lt;code>./Makefile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-make" data-lang="make">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">.PHONY&lt;/span>&lt;span style="color:#f92672">:&lt;/span> clean build test
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">clean&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;Not implemented&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">build&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;Not implemented&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">test&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;Not implemented&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">install&lt;/span>&lt;span style="color:#f92672">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;Not implemented&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>./main.go&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> &lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Hello, World!&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Run project:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>go run .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="taskfile">
 Taskfile
 &lt;a class="anchor" href="#taskfile">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>
 &lt;a href="https://taskfile.dev/">Task file home&lt;/a>&lt;/li>
&lt;li>
 &lt;a href="https://github.com/go-task/task">Task file repository&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title/><link>https://dpurge.github.io/docs/programming/go/cgi/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/go/cgi/</guid><description>&lt;h1 id="cgi">
 CGI
 &lt;a class="anchor" href="#cgi">#&lt;/a>
&lt;/h1>
&lt;h2 id="simple-cgi-app">
 Simple CGI app
 &lt;a class="anchor" href="#simple-cgi-app">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">package&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;bytes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">func&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">var&lt;/span> &lt;span style="color:#a6e22e">buf&lt;/span> &lt;span style="color:#a6e22e">bytes&lt;/span>.&lt;span style="color:#a6e22e">Buffer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Fprintf&lt;/span>(&lt;span style="color:#f92672">&amp;amp;&lt;/span>&lt;span style="color:#a6e22e">buf&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;Time at %s: %s\n&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">Getenv&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;SERVER_NAME&amp;#34;&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">Now&lt;/span>().&lt;span style="color:#a6e22e">Format&lt;/span>(&lt;span style="color:#a6e22e">time&lt;/span>.&lt;span style="color:#a6e22e">RFC1123&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Println&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Content-type: text/plain&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">fmt&lt;/span>.&lt;span style="color:#a6e22e">Printf&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;Content-Length: %d\n\n&amp;#34;&lt;/span>, &lt;span style="color:#a6e22e">buf&lt;/span>.&lt;span style="color:#a6e22e">Len&lt;/span>())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">buf&lt;/span>.&lt;span style="color:#a6e22e">WriteTo&lt;/span>(&lt;span style="color:#a6e22e">os&lt;/span>.&lt;span style="color:#a6e22e">Stdout&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/go/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/go/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-go-setup" id="tabs-go-setup-0" checked="checked" />
 &lt;label for="tabs-go-setup-0">Linux&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;pre>&lt;code> ```sh
 sudo apt update
 sudo apt upgrade -y
 sudo apt install golang -y
 ```
&lt;/code>&lt;/pre>
&lt;/div>&lt;input type="radio" class="toggle" name="tabs-go-setup" id="tabs-go-setup-1" />
 &lt;label for="tabs-go-setup-1">Windows&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;pre>&lt;code> $go_version = &amp;quot;1.21.4&amp;quot;
 $go_archive = &amp;quot;https://dl.google.com/go/go${go_version}.windows-amd64.zip&amp;quot;
 Invoke-WebRequest -Uri $go_archive -OutFile &amp;quot;${pwd}/go${go_version}.windows-amd64.zip&amp;quot;

 Add-Type -Assembly System.IO.Compression.FileSystem
 [System.IO.Compression.ZipFile]::ExtractToDirectory(&amp;quot;${pwd}/go${go_version}.windows-amd64.zip&amp;quot;, &amp;quot;${pwd}&amp;quot;)
 Remove-Item -Path &amp;quot;${pwd}/go${go_version}.windows-amd64.zip&amp;quot;

 $path_list = [System.Environment]::GetEnvironmentVariable('PATH', 'Machine') -split ';'
 if ($path_list -notcontains &amp;quot;${pwd}\go\bin&amp;quot;) {
 $path_string = ($path_list + &amp;quot;${pwd}\go\bin&amp;quot;) -join ';'
 [System.Environment]::SetEnvironmentVariable('PATH', $path_string, 'Machine')
 }
&lt;/code>&lt;/pre>
&lt;/div>&lt;/div>

&lt;p>Check version: &lt;code>go version&lt;/code>&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/programming/powershell/azdo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/powershell/azdo/</guid><description>&lt;h1 id="azure-devops">
 Azure DevOps
 &lt;a class="anchor" href="#azure-devops">#&lt;/a>
&lt;/h1>
&lt;h2 id="uris-and-authentication-header">
 URIs and authentication header
 &lt;a class="anchor" href="#uris-and-authentication-header">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$AccessToken = $env:AZDO_ADMIN_TOKEN
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$Organization = &lt;span style="color:#e6db74">&amp;#34;MyOrganization&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$AuthenicationHeader = @{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Authorization = &lt;span style="color:#e6db74">&amp;#39;Basic &amp;#39;&lt;/span> + [&lt;span style="color:#66d9ef">Convert&lt;/span>]::ToBase64String([&lt;span style="color:#66d9ef">Text.Encoding&lt;/span>]::ASCII.GetBytes(&lt;span style="color:#e6db74">&amp;#34;:&lt;/span>${AccessToken}&lt;span style="color:#e6db74">&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$OrganizationUri = &lt;span style="color:#e6db74">&amp;#34;https://dev.azure.com/&lt;/span>${Organization}&lt;span style="color:#e6db74">/&amp;#34;&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$ProjectsUri = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${OrganizationUri}&lt;span style="color:#e6db74">_apis/projects?api-version=5.1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>$RepositoriesUri = &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${OrganizationUri}&lt;span style="color:#e6db74">_apis/git/repositories?api-version=7.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="azdo-projects">
 AzDO projects
 &lt;a class="anchor" href="#azdo-projects">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$Projects = Invoke-RestMethod -Uri $ProjectsUri -Method get -Headers $AuthenicationHeader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($Project &lt;span style="color:#66d9ef">in&lt;/span> $Projects.Value) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $ProjectName = $Project.name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $ProjectUri = $Project.url
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${ProjectName}&lt;span style="color:#e6db74">: &lt;/span>${ProjectUri}&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="azdo-repositories">
 AzDO repositories
 &lt;a class="anchor" href="#azdo-repositories">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>$Repositories = Invoke-RestMethod -Uri $RepositoriesUri -Method get -Headers $AuthenicationHeader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($Repository &lt;span style="color:#66d9ef">in&lt;/span> $Repositories.value) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $ProjectName = $Repository.Project.name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $RepositoryName = $Repository.name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $RepositoryWebUri = $Repository.webUrl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $RepositoryIsActive = &lt;span style="color:#f92672">-not&lt;/span> $Repository.IsDisabled
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> ($RepositoryIsActive) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $Folder = Join-Path -Path $PWD -ChildPath $ProjectName
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#f92672">-not&lt;/span> (Test-Path $Folder)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> New-Item $Folder -ItemType Directory | Out-Null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Push-Location -Path $Folder
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Write-Host &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${ProjectName}&lt;span style="color:#e6db74">/&lt;/span>${RepositoryName}&lt;span style="color:#e6db74"> ...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> git clone --depth &lt;span style="color:#ae81ff">1&lt;/span> $RepositoryWebUri
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pop-Location
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/powershell/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/powershell/basics/</guid><description>&lt;h1 id="powershell-basics">
 Powershell basics
 &lt;a class="anchor" href="#powershell-basics">#&lt;/a>
&lt;/h1></description></item><item><title/><link>https://dpurge.github.io/docs/programming/powershell/snippets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/powershell/snippets/</guid><description>&lt;h1 id="powershell-snippets">
 Powershell snippets
 &lt;a class="anchor" href="#powershell-snippets">#&lt;/a>
&lt;/h1>
&lt;h2 id="get-unix-timestamp">
 Get unix timestamp
 &lt;a class="anchor" href="#get-unix-timestamp">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#66d9ef">int&lt;/span>](Get-Date -UFormat &lt;span style="color:#66d9ef">%&lt;/span>s -Millisecond &lt;span style="color:#ae81ff">0&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="match-glob-pattern">
 Match glob pattern
 &lt;a class="anchor" href="#match-glob-pattern">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">function&lt;/span> Test-GlobMatch {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">param&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">string&lt;/span>] $value,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [&lt;span style="color:#66d9ef">string&lt;/span>] $pattern
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $position = &lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">foreach&lt;/span> ($char &lt;span style="color:#66d9ef">in&lt;/span> $pattern.toCharArray()) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">Switch&lt;/span> ($char)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;?&amp;#39;&lt;/span> { &lt;span style="color:#66d9ef">continue&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#39;*&amp;#39;&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">foreach&lt;/span> ($i &lt;span style="color:#66d9ef">in&lt;/span> $value.Length .. $position) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (Test-GlobMatch $value.Substring($i) $pattern.Substring($position + &lt;span style="color:#ae81ff">1&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> $True
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> $False
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">default&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> ($value.Length &lt;span style="color:#f92672">-eq&lt;/span> $position &lt;span style="color:#f92672">-or&lt;/span> $pattern[$position] &lt;span style="color:#f92672">-ne&lt;/span> $value[$position]) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> $False
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> $position++
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> $value.Length &lt;span style="color:#f92672">-eq&lt;/span> $position
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="remove-git-directories">
 Remove git directories
 &lt;a class="anchor" href="#remove-git-directories">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>Get-ChildItem -Recurse -Directory -Hidden -Include &lt;span style="color:#e6db74">&amp;#39;.git&amp;#39;&lt;/span> | Remove-Item -Force -Recurse
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="compress-as-standard-zip">
 Compress as standard zip
 &lt;a class="anchor" href="#compress-as-standard-zip">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($item &lt;span style="color:#66d9ef">in&lt;/span> (Get-ChildItem -Directory)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 7z a -mm=Deflate -mfb=&lt;span style="color:#ae81ff">258&lt;/span> -mpass=&lt;span style="color:#ae81ff">15&lt;/span> -r &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${item}&lt;span style="color:#e6db74">.zip&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${item}&lt;span style="color:#e6db74">/*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="compress-maximally">
 Compress maximally
 &lt;a class="anchor" href="#compress-maximally">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">foreach&lt;/span> ($item &lt;span style="color:#66d9ef">in&lt;/span> (Get-ChildItem -Directory)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 7z a -t7z -mx=&lt;span style="color:#ae81ff">9&lt;/span> -mfb=&lt;span style="color:#ae81ff">273&lt;/span> -ms -md=&lt;span style="color:#ae81ff">31&lt;/span> -myx=&lt;span style="color:#ae81ff">9&lt;/span> -mtm=- -mmt -mmtf -md=&lt;span style="color:#ae81ff">1536m&lt;/span> -mmf=bt3 -mmc=&lt;span style="color:#ae81ff">10000&lt;/span> -mpb=&lt;span style="color:#ae81ff">0&lt;/span> -mlc=&lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${item}&lt;span style="color:#e6db74">.7z&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>${item}&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/python/basics/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/python/basics/</guid><description>&lt;h1 id="python-basics">
 Python basics
 &lt;a class="anchor" href="#python-basics">#&lt;/a>
&lt;/h1>
&lt;h2 id="application-structure">
 Application structure
 &lt;a class="anchor" href="#application-structure">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p>
&lt;h2 id="class-structure">
 Class structure
 &lt;a class="anchor" href="#class-structure">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p>
&lt;h2 id="executable-module">
 Executable module
 &lt;a class="anchor" href="#executable-module">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/programming/python/environment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/python/environment/</guid><description>&lt;h1 id="virtual-environment">
 Virtual environment
 &lt;a class="anchor" href="#virtual-environment">#&lt;/a>
&lt;/h1>
&lt;p>TODO&lt;/p>
&lt;h2 id="venv">
 Venv
 &lt;a class="anchor" href="#venv">#&lt;/a>
&lt;/h2>
&lt;p>Create and activate virtual environment:&lt;/p>




&lt;div class="book-tabs">&lt;input type="radio" class="toggle" name="tabs-venv-setup" id="tabs-venv-setup-0" checked="checked" />
 &lt;label for="tabs-venv-setup-0">Bash&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo Hello
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;input type="radio" class="toggle" name="tabs-venv-setup" id="tabs-venv-setup-1" />
 &lt;label for="tabs-venv-setup-1">Powershell&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-pwsh" data-lang="pwsh">&lt;span style="display:flex;">&lt;span>python -m venv .venv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.venv\Scripts\activate.ps1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;input type="radio" class="toggle" name="tabs-venv-setup" id="tabs-venv-setup-2" />
 &lt;label for="tabs-venv-setup-2">Cmd&lt;/label>
 &lt;div class="book-tabs-content markdown-inner">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">echo&lt;/span> Hello
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;/div>

&lt;p>Upgrade &lt;code>pip&lt;/code> and install &lt;code>requirements.txt&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>python -m pip install --upgrade pip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pip install -r requirements.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Deactivate virtual environment:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>deactivate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="pipenv">
 Pipenv
 &lt;a class="anchor" href="#pipenv">#&lt;/a>
&lt;/h2>
&lt;p>TODO&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/programming/python/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/python/installation/</guid><description>&lt;h1 id="installation">
 Installation
 &lt;a class="anchor" href="#installation">#&lt;/a>
&lt;/h1>
&lt;h2 id="pyenv-on-linux">
 PyEnv on Linux
 &lt;a class="anchor" href="#pyenv-on-linux">#&lt;/a>
&lt;/h2>
&lt;p>Install build dependencies:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> build-essential &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libssl-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> zlib1g-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libbz2-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libreadline-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libsqlite3-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> llvm &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libncursesw5-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> xz-utils &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> tk-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libxml2-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libxmlsec1-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> libffi-dev &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> liblzma-dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install PyEnv scripts:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>curl https://pyenv.run | bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add to &lt;code>~/.profile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export PATH&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$HOME&lt;span style="color:#e6db74">/.pyenv/bin:&lt;/span>$PATH&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> command -v pyenv 1&amp;gt;/dev/null 2&amp;gt;&amp;amp;1; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> eval &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>pyenv init -&lt;span style="color:#66d9ef">)&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="pyenv-on-windows">
 PyEnv on Windows
 &lt;a class="anchor" href="#pyenv-on-windows">#&lt;/a>
&lt;/h2>
&lt;p>Copy &lt;code>pyenv-win&lt;/code> from 
 &lt;a href="https://github.com/pyenv-win/pyenv-win/archive/master.zip">https://github.com/pyenv-win/pyenv-win/archive/master.zip&lt;/a> to &lt;code>E:\pgm\pyenv-win&lt;/code>.&lt;/p></description></item><item><title/><link>https://dpurge.github.io/docs/programming/sqlite/data/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/sqlite/data/</guid><description>&lt;h1 id="data-manipulations">
 Data manipulations
 &lt;a class="anchor" href="#data-manipulations">#&lt;/a>
&lt;/h1>
&lt;h2 id="cvs-data">
 CVS data
 &lt;a class="anchor" href="#cvs-data">#&lt;/a>
&lt;/h2>
&lt;p>Example data in &lt;code>data.csv&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-csv" data-lang="csv">index, code, name
1, EX1, Example 1
2, EX2, Example 2
3, EX3, Example 3
&lt;/code>&lt;/pre>&lt;p>Start new database:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>sqlite3 data.db
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Load data into table and delete headers in sqlite shell:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>create table data &lt;span style="color:#f92672">(&lt;/span>index, code, name&lt;span style="color:#f92672">)&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.mode csv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.headers ON
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.separator ,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>.import data.csv data
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>delete from data where index &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;index&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> * from data limit 60;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title/><link>https://dpurge.github.io/docs/programming/typescript/nodejs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dpurge.github.io/docs/programming/typescript/nodejs/</guid><description>&lt;h1 id="nodejs">
 NodeJS
 &lt;a class="anchor" href="#nodejs">#&lt;/a>
&lt;/h1>
&lt;h2 id="installation-on-linux">
 Installation on Linux
 &lt;a class="anchor" href="#installation-on-linux">#&lt;/a>
&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>git clone https://github.com/nvm-sh/nvm.git /opt/nvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /opt/nvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git checkout v0.39.3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Add to &lt;code>~/.profile&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>export NVM_DIR&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>$HOME&lt;span style="color:#e6db74">/.nvm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> -s &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$NVM_DIR&lt;span style="color:#e6db74">/nvm.sh&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$NVM_DIR&lt;span style="color:#e6db74">/nvm.sh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[&lt;/span> -s &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$NVM_DIR&lt;span style="color:#e6db74">/bash_completion&amp;#34;&lt;/span> &lt;span style="color:#f92672">]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$NVM_DIR&lt;span style="color:#e6db74">/bash_completion&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install NodeJS:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sh" data-lang="sh">&lt;span style="display:flex;">&lt;span>nvm install node
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nvm install-latest-npm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>npm install -g yarn
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="installation-on-windows">
 Installation on Windows
 &lt;a class="anchor" href="#installation-on-windows">#&lt;/a>
&lt;/h2>
&lt;p>Install 
 &lt;a href="https://github.com/coreybutler/nvm-windows">NVM for Windows&lt;/a>&lt;/p>
&lt;p>Settings:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-txt" data-lang="txt">&lt;span style="display:flex;">&lt;span>root: D:\pgm\nvm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>path: D:\pgm\nodejs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install NodeJS:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cmd" data-lang="cmd">&lt;span style="display:flex;">&lt;span>nvm list available
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nvm install latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>nvm use newest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Install &lt;code>yarn&lt;/code>:&lt;/p></description></item></channel></rss>